<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malik Service Center</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f3f4f6;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* Utility Classes */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }
        
        .hidden { display: none !important; }
        .block { display: block; }
        .flex { display: flex; }
        .grid { display: grid; }
        
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        
        .cursor-pointer { cursor: pointer; }
        .transition { transition: all 0.3s ease; }
        
        /* Spacing */
        .p-2 { padding: 0.5rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        
        .m-0 { margin: 0; }
        .m-4 { margin: 1rem; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-8 { margin-top: 2rem; }
        
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        
        .mr-2 { margin-right: 0.5rem; }
        .mr-4 { margin-right: 1rem; }
        
        /* Typography */
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-4xl { font-size: 2.25rem; }
        
        .font-light { font-weight: 300; }
        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        
        /* Colors */
        .text-white { color: #ffffff; }
        .text-gray-500 { color: #6b7280; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-gray-800 { color: #1f2937; }
        
        .text-blue-500 { color: #3b82f6; }
        .text-blue-600 { color: #2563eb; }
        .text-blue-700 { color: #1d4ed8; }
        .text-blue-900 { color: #1e3a8a; }
        
        .text-green-500 { color: #10b981; }
        .text-green-600 { color: #059669; }
        .text-green-700 { color: #047857; }
        
        .text-red-500 { color: #ef4444; }
        .text-red-600 { color: #dc2626; }
        
        .text-yellow-500 { color: #f59e0b; }
        .text-yellow-600 { color: #d97706; }
        
        .bg-white { background-color: #ffffff; }
        .bg-gray-50 { background-color: #f9fafb; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-gray-200 { background-color: #e5e7eb; }
        
        .bg-blue-50 { background-color: #eff6ff; }
        .bg-blue-100 { background-color: #dbeafe; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-blue-600 { background-color: #2563eb; }
        .bg-blue-700 { background-color: #1d4ed8; }
        .bg-blue-800 { background-color: #1e40af; }
        .bg-blue-900 { background-color: #1e3a8a; }
        
        .bg-green-50 { background-color: #f0fdf4; }
        .bg-green-100 { background-color: #dcfce7; }
        .bg-green-500 { background-color: #10b981; }
        
        .bg-red-50 { background-color: #fef2f2; }
        .bg-red-100 { background-color: #fee2e2; }
        .bg-red-500 { background-color: #ef4444; }
        
        .bg-yellow-50 { background-color: #fffbeb; }
        .bg-yellow-100 { background-color: #fef3c7; }
        
        /* Borders */
        .border { border: 1px solid #e5e7eb; }
        .border-0 { border: 0; }
        .border-2 { border-width: 2px; }
        
        .border-t { border-top: 1px solid #e5e7eb; }
        .border-b { border-bottom: 1px solid #e5e7eb; }
        
        .border-blue-200 { border-color: #bfdbfe; }
        .border-blue-500 { border-color: #3b82f6; }
        .border-gray-200 { border-color: #e5e7eb; }
        .border-gray-300 { border-color: #d1d5db; }
        
        .rounded { border-radius: 0.25rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-full { border-radius: 9999px; }
        
        /* Shadows */
        .shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
        .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        
        /* Navigation */
        nav {
            background: linear-gradient(135deg, #1e3a8a 0%, #1d4ed8 100%);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 64px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            text-decoration: none;
            font-size: 1.25rem;
            font-weight: bold;
        }
        
        .logo i {
            font-size: 1.5rem;
        }
        
        .nav-links {
            display: none;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .nav-link.active {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .mobile-menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
        }
        
        .mobile-menu {
            background-color: #1e40af;
            padding: 1rem;
            position: absolute;
            top: 64px;
            left: 0;
            right: 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .mobile-menu-link {
            display: block;
            color: white;
            text-decoration: none;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 4px;
            transition: background-color 0.3s;
        }
        
        .mobile-menu-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Main Content */
        main {
            min-height: calc(100vh - 200px);
            padding: 2rem 0;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .card-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            background-color: #f9fafb;
        }
        
        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .status-dikonfirmasi {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .status-diproses {
            background-color: #e0f2fe;
            color: #0c4a6e;
        }
        
        .status-selesai {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .status-dibatalkan {
            background-color: #fee2e2;
            color: #991b1b;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-input.error {
            border-color: #ef4444;
        }
        
        .form-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            gap: 8px;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background-color: #2563eb;
        }
        
        .btn-secondary {
            background-color: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background-color: #4b5563;
        }
        
        .btn-success {
            background-color: #10b981;
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            background-color: #059669;
        }
        
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        
        .btn-danger:hover:not(:disabled) {
            background-color: #dc2626;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid #d1d5db;
            color: #374151;
        }
        
        .btn-outline:hover:not(:disabled) {
            background-color: #f9fafb;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.875rem;
        }
        
        .btn-lg {
            padding: 12px 24px;
            font-size: 1.125rem;
        }
        
        /* Tables */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        
        thead {
            background-color: #f9fafb;
        }
        
        th {
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
        }
        
        td {
            padding: 12px 16px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        tbody tr:hover {
            background-color: #f9fafb;
        }
        
        /* Alerts */
        .alert {
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            border: 1px solid transparent;
        }
        
        .alert-success {
            background-color: #d1fae5;
            border-color: #a7f3d0;
            color: #065f46;
        }
        
        .alert-error {
            background-color: #fee2e2;
            border-color: #fecaca;
            color: #991b1b;
        }
        
        .alert-info {
            background-color: #dbeafe;
            border-color: #bfdbfe;
            color: #1e40af;
        }
        
        .alert-warning {
            background-color: #fef3c7;
            border-color: #fde68a;
            color: #92400e;
        }
        
        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f4f6;
            border-top: 2px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            background-color: #f9fafb;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Grid System */
        .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
        
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }
        .gap-8 { gap: 2rem; }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, #1e3a8a 0%, #1d4ed8 100%);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        .footer-section h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: white;
        }
        
        .footer-section p {
            color: #dbeafe;
            margin-bottom: 0.5rem;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #dbeafe;
            font-size: 0.875rem;
        }
        
        /* Responsive */
        @media (min-width: 768px) {
            .nav-links {
                display: flex;
                gap: 10px;
            }
            
            .mobile-menu-btn {
                display: none;
            }
            
            .footer-content {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .grid-cols-1-md { grid-template-columns: repeat(1, 1fr); }
            .grid-cols-2-md { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-3-md { grid-template-columns: repeat(3, 1fr); }
            .grid-cols-4-md { grid-template-columns: repeat(4, 1fr); }
        }
        
        @media (min-width: 1024px) {
            .container {
                padding: 0 20px;
            }
            
            .grid-cols-1-lg { grid-template-columns: repeat(1, 1fr); }
            .grid-cols-2-lg { grid-template-columns: repeat(2, 1fr); }
            .grid-cols-3-lg { grid-template-columns: repeat(3, 1fr); }
            .grid-cols-4-lg { grid-template-columns: repeat(4, 1fr); }
        }
        
        /* Custom Styles */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 12px;
            margin-bottom: 2rem;
        }
        
        .service-card {
            border-left: 4px solid #3b82f6;
        }
        
        .service-card.light { border-left-color: #10b981; }
        .service-card.medium { border-left-color: #f59e0b; }
        .service-card.heavy { border-left-color: #ef4444; }
        
        .price-tag {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e3a8a;
        }
        
        .estimate-time {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }
        
        /* Dashboard Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
        
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #1e3a8a;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }
        
        /* Authentication */
        .auth-container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .auth-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .auth-icon {
            font-size: 3rem;
            color: #3b82f6;
            margin-bottom: 1rem;
        }
        
        /* Search and Filter */
        .search-filter {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }
        
        .search-input {
            flex: 1;
            min-width: 200px;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #6b7280;
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #d1d5db;
        }
        
        /* Receipt */
        .receipt {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .receipt-header {
            text-align: center;
            border-bottom: 2px solid #1e3a8a;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }
        
        .receipt-details {
            margin-bottom: 2rem;
        }
        
        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .receipt-total {
            border-top: 2px solid #374151;
            padding-top: 1rem;
            margin-top: 1rem;
            font-weight: bold;
            font-size: 1.25rem;
        }
        
        /* Fix for text visibility */
        .text-visible {
            color: #1f2937 !important;
            text-shadow: none !important;
        }
        
        .bg-visible {
            background-color: transparent !important;
        }
        
        /* Print styles */
        @media print {
            nav, footer, .no-print {
                display: none !important;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .receipt {
                box-shadow: none !important;
                max-width: 100% !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <a href="#" class="logo" onclick="showSection('home')">
                <i class="fas fa-tools"></i>
                <span>Malik Service Center</span>
            </a>
            
            <div class="nav-links">
                <a href="#" class="nav-link" onclick="showSection('home')">Beranda</a>
                <a href="#" class="nav-link" onclick="showSection('services')">Layanan</a>
                <a href="#" class="nav-link" onclick="showSection('track')">Lacak Order</a>
                <a href="#" class="nav-link" onclick="showSection('admin')">Admin</a>
            </div>
            
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div id="mobileMenu" class="mobile-menu hidden">
            <a href="#" class="mobile-menu-link" onclick="showSection('home'); toggleMobileMenu()">Beranda</a>
            <a href="#" class="mobile-menu-link" onclick="showSection('services'); toggleMobileMenu()">Layanan</a>
            <a href="#" class="mobile-menu-link" onclick="showSection('track'); toggleMobileMenu()">Lacak Order</a>
            <a href="#" class="mobile-menu-link" onclick="showSection('admin'); toggleMobileMenu()">Admin</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Home Section -->
        <section id="home" class="section active">
            <div class="hero-section">
                <h1 class="text-3xl font-bold text-blue-900 mb-4">Selamat Datang di Malik Service Center</h1>
                <p class="text-lg text-gray-700 mb-6">Solusi terpercaya untuk perbaikan smartphone, laptop, PC, dan perangkat elektronik lainnya</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <button class="btn btn-primary" onclick="showSection('services')">
                        <i class="fas fa-search mr-2"></i>Cari Layanan
                    </button>
                    <button class="btn btn-outline" onclick="showSection('track')">
                        <i class="fas fa-shipping-fast mr-2"></i>Lacak Order
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-mobile-alt text-blue-600 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">Smartphone & Tablet</h3>
                                <p class="text-gray-600">10+ layanan perbaikan</p>
                            </div>
                        </div>
                        <p class="text-gray-700">Ganti LCD, baterai, port charging, dan perbaikan motherboard</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="bg-green-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-laptop text-green-600 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">Laptop & PC</h3>
                                <p class="text-gray-600">11+ layanan perbaikan</p>
                            </div>
                        </div>
                        <p class="text-gray-700">Instal OS, upgrade hardware, perbaikan motherboard, dan data recovery</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-body">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-print text-purple-600 text-2xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg">Printer & Scanner</h3>
                                <p class="text-gray-600">2+ layanan perbaikan</p>
                            </div>
                        </div>
                        <p class="text-gray-700">Refill tinta, ganti printhead, dan perawatan berkala</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <h2 class="text-2xl font-bold text-blue-900 mb-4 md:mb-0">Daftar Layanan Perbaikan</h2>
                <div class="flex flex-col md:flex-row gap-4 w-full md:w-auto">
                    <select id="categoryFilter" class="form-input" onchange="filterServices()">
                        <option value="">Semua Kategori</option>
                    </select>
                    <select id="typeFilter" class="form-input" onchange="filterServices()">
                        <option value="">Semua Tipe</option>
                        <option value="Ringan">Ringan</option>
                        <option value="Sedang">Sedang</option>
                        <option value="Berat">Berat</option>
                    </select>
                </div>
            </div>
            
            <div id="servicesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Services will be loaded here -->
            </div>
        </section>

        <!-- Track Order Section -->
        <section id="track" class="section">
            <div class="auth-container">
                <div class="card">
                    <div class="card-body">
                        <h2 class="text-2xl font-bold text-center text-blue-900 mb-6">Lacak Status Perbaikan</h2>
                        
                        <div class="form-group">
                            <label class="form-label">Masukkan Order ID atau Nomor Resi</label>
                            <div class="flex">
                                <input type="text" id="trackInput" placeholder="Contoh: ORD20240115001" 
                                       class="form-input rounded-r-none">
                                <button onclick="trackOrder()" class="btn btn-primary rounded-l-none">
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div id="trackResult"></div>
                        
                        <div class="text-center mt-6">
                            <p class="text-gray-600 mb-2">Tidak punya Order ID?</p>
                            <button onclick="showSection('services')" class="btn btn-outline">
                                Buat order baru sekarang
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin" class="section">
            <!-- Login Form -->
            <div id="loginForm">
                <div class="auth-container">
                    <div class="auth-card">
                        <div class="auth-header">
                            <div class="auth-icon">
                                <i class="fas fa-user-shield"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-blue-900">Admin Login</h2>
                            <p class="text-gray-600">Masuk ke dashboard admin</p>
                        </div>
                        
                        <form id="loginFormElement" onsubmit="loginAdmin(event)">
                            <div class="form-group">
                                <label class="form-label">Username</label>
                                <input type="text" id="username" required
                                       class="form-input" placeholder="Masukkan username">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Password</label>
                                <input type="password" id="password" required
                                       class="form-input" placeholder="Masukkan password">
                                <small class="text-gray-500">Password sudah ada di backend system</small>
                            </div>
                            
                            <div id="loginMessage" class="form-error mb-4"></div>
                            
                            <button type="submit" id="loginBtn" class="btn btn-primary w-full">
                                <span>Login</span>
                                <span id="loginLoading" class="loading hidden"></span>
                            </button>
                            
                            <div class="text-center mt-4 text-sm text-gray-600">
                                <p>Hubungi administrator untuk mendapatkan akses</p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Admin Dashboard -->
            <div id="adminDashboard" class="hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-blue-900">Admin Dashboard</h2>
                        <p id="adminWelcome" class="text-gray-600">Selamat datang, Admin!</p>
                    </div>
                    <button onclick="logoutAdmin()" class="btn btn-danger mt-4 md:mt-0">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                </div>
                
                <!-- Admin Tabs -->
                <div class="card mb-6">
                    <div class="card-body p-0">
                        <div class="flex flex-wrap border-b">
                            <button onclick="showAdminTab('dashboard')" 
                                    class="px-6 py-4 font-medium border-b-2 border-transparent hover:text-blue-600 admin-tab">
                                <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                            </button>
                            <button onclick="showAdminTab('orders')" 
                                    class="px-6 py-4 font-medium border-b-2 border-transparent hover:text-blue-600 admin-tab">
                                <i class="fas fa-clipboard-list mr-2"></i>Orders
                            </button>
                            <button onclick="showAdminTab('services')" 
                                    class="px-6 py-4 font-medium border-b-2 border-transparent hover:text-blue-600 admin-tab">
                                <i class="fas fa-concierge-bell mr-2"></i>Layanan
                            </button>
                        </div>
                        
                        <!-- Dashboard Tab -->
                        <div id="adminDashboardTab" class="admin-tab-content p-6">
                            <div class="stats-grid mb-6">
                                <div class="stat-card">
                                    <div class="stat-value" id="statTotalOrders">0</div>
                                    <div class="stat-label">Total Orders</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="statRevenue">Rp 0</div>
                                    <div class="stat-label">Pendapatan</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="statPending">0</div>
                                    <div class="stat-label">Order Pending</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="statServices">0</div>
                                    <div class="stat-label">Layanan Aktif</div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="font-bold">Order Terbaru</h3>
                                    </div>
                                    <div class="card-body">
                                        <div id="recentOrders" class="empty-state">
                                            <i class="fas fa-clipboard-list"></i>
                                            <p>Memuat data...</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="font-bold">Statistik Order</h3>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="orderChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Orders Tab -->
                        <div id="adminOrdersTab" class="admin-tab-content hidden p-6">
                            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                                <h3 class="text-xl font-bold mb-4 md:mb-0">Manajemen Order</h3>
                                <button onclick="showNewOrderModal()" class="btn btn-success">
                                    <i class="fas fa-plus mr-2"></i>Order Manual
                                </button>
                            </div>
                            
                            <div class="search-filter mb-6">
                                <input type="text" id="orderSearch" placeholder="Cari order..." 
                                       class="form-input search-input" onkeyup="searchOrders()">
                                <select id="orderStatusFilter" class="form-input" onchange="filterOrders()">
                                    <option value="">Semua Status</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Dikonfirmasi">Dikonfirmasi</option>
                                    <option value="Diproses">Diproses</option>
                                    <option value="Selesai">Selesai</option>
                                    <option value="Dibatalkan">Dibatalkan</option>
                                </select>
                            </div>
                            
                            <div class="table-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Pelanggan</th>
                                            <th>Total</th>
                                            <th>Status</th>
                                            <th>Tanggal</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ordersTable">
                                        <!-- Orders will be loaded here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Services Tab -->
                        <div id="adminServicesTab" class="admin-tab-content hidden p-6">
                            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                                <h3 class="text-xl font-bold mb-4 md:mb-0">Manajemen Layanan</h3>
                                <button onclick="showNewServiceModal()" class="btn btn-primary">
                                    <i class="fas fa-plus mr-2"></i>Tambah Layanan
                                </button>
                            </div>
                            
                            <div id="adminServicesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                <!-- Admin services will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Malik Service Center</h3>
                    <p>Solusi perbaikan elektronik terpercaya sejak 2020.</p>
                    <p>Layanan profesional dengan harga terjangkau.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Kontak</h3>
                    <p><i class="fas fa-phone mr-2"></i> 0857-1308-7659</p>
                    <p><i class="fas fa-envelope mr-2"></i> thumbtackid@gmail.com</p>
                    <p><i class="fas fa-map-marker-alt mr-2"></i> Semarang, Indonesia</p>
                </div>
                
                <div class="footer-section">
                    <h3>Jam Operasional</h3>
                    <p>Senin - Jumat: 10:00 - 17:00</p>
                    <p>Sabtu: 10:00 - 15:00</p>
                    <p>Minggu: 10:00 - 15:00</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Malik Service Center. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Order Modal -->
    <div id="orderModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-xl font-bold">Pesan Layanan</h3>
                <button onclick="closeOrderModal()" class="btn btn-outline btn-sm">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="orderDetails" class="mb-6 p-4 bg-blue-50 rounded-lg"></div>
                
                <form id="orderForm" onsubmit="submitOrder(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div class="form-group">
                            <label class="form-label">Nama Lengkap *</label>
                            <input type="text" id="customerName" required class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">No. WhatsApp *</label>
                            <input type="tel" id="customerPhone" required class="form-input">
                        </div>
                        <div class="form-group md:col-span-2">
                            <label class="form-label">Alamat Lengkap</label>
                            <textarea id="customerAddress" rows="2" class="form-input"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Kode Diskon (Opsional)</label>
                            <div class="flex">
                                <input type="text" id="discountCode" class="form-input rounded-r-none">
                                <button type="button" onclick="checkDiscount()" class="btn btn-primary rounded-l-none">
                                    Cek
                                </button>
                            </div>
                            <div id="discountMessage" class="mt-2 text-sm"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Biaya Tambahan (Opsional)</label>
                            <input type="number" id="additionalFees" min="0" value="0" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group mb-6">
                        <label class="form-label">Catatan untuk Teknisi</label>
                        <textarea id="orderNotes" rows="3" class="form-input" 
                                  placeholder="Deskripsikan masalah perangkat Anda secara detail..."></textarea>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mb-6">
                        <div class="receipt-item">
                            <span>Subtotal:</span>
                            <span id="orderSubtotal">Rp 0</span>
                        </div>
                        <div class="receipt-item">
                            <span>Diskon:</span>
                            <span id="orderDiscount">Rp 0</span>
                        </div>
                        <div class="receipt-item">
                            <span>Biaya Tambahan:</span>
                            <span id="orderAdditional">Rp 0</span>
                        </div>
                        <div class="receipt-item receipt-total">
                            <span>TOTAL:</span>
                            <span id="orderTotal">Rp 0</span>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" onclick="closeOrderModal()" class="btn btn-outline">
                            Batal
                        </button>
                        <button type="submit" id="submitOrderBtn" class="btn btn-primary">
                            <span>Buat Order</span>
                            <span id="orderLoading" class="loading hidden"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ==========================================
        // KONFIGURASI & STATE
        // ==========================================
        
        const STORAGE_KEYS = {
            TOKEN: 'malik_service_token',
            USER: 'malik_service_user',
            ORDERS: 'malik_service_orders',
            SERVICES: 'malik_service_services'
        };
        
        // API URL - GANTI INI SETELAH DEPLOY APPS SCRIPT
        const API_URL = 'https://script.google.com/macros/s/AKfycbywRFTT4SK3Wg14OiHmfVsFPlgsc-eG2Jb9xgMkbM6YeguOigrHSFYodkahSbhUJV_4/exec'; // Kosongkan untuk demo mode
        
        let currentUser = null;
        let adminToken = null;
        let allServices = [];
        let allOrders = [];
        let currentOrder = null;
        let discountApplied = null;
        let charts = {};
        
        // ==========================================
        // INISIALISASI
        // ==========================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Malik Service System v4.0 - Frontend Initialized');
            
            // Cek auth status
            checkAuth();
            
            // Load initial data
            initializeData();
            
            // Setup event listeners
            setupEventListeners();
            
            // Show home section by default
            showSection('home');
            
            // Update active nav
            updateActiveNav('home');
        });
        
        function initializeData() {
            // Load sample services
            loadSampleServices();
            
            // Load orders from storage
            loadOrdersFromStorage();
            
            // Initialize category filter
            initializeCategoryFilter();
        }
        
        function setupEventListeners() {
            // Update order summary when additional fees change
            document.getElementById('additionalFees')?.addEventListener('input', updateOrderSummary);
            
            // Auto-track order if ID is in URL
            const urlParams = new URLSearchParams(window.location.search);
            const orderId = urlParams.get('track');
            if (orderId) {
                showSection('track');
                document.getElementById('trackInput').value = orderId;
                setTimeout(() => trackOrder(), 500);
            }
        }
        
        // ==========================================
        // NAVIGASI
        // ==========================================
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update active nav
            updateActiveNav(sectionId);
            
            // Handle section-specific logic
            handleSectionChange(sectionId);
        }
        
        function updateActiveNav(sectionId) {
            // Update desktop nav
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.textContent.includes(getNavText(sectionId))) {
                    link.classList.add('active');
                }
            });
            
            // Update mobile nav
            document.querySelectorAll('.mobile-menu-link').forEach(link => {
                link.classList.remove('active');
                if (link.textContent.includes(getNavText(sectionId))) {
                    link.classList.add('active');
                }
            });
        }
        
        function getNavText(sectionId) {
            switch(sectionId) {
                case 'home': return 'Beranda';
                case 'services': return 'Layanan';
                case 'track': return 'Lacak Order';
                case 'admin': return 'Admin';
                default: return '';
            }
        }
        
        function handleSectionChange(sectionId) {
            switch(sectionId) {
                case 'admin':
                    if (isLoggedIn()) {
                        showAdminDashboard();
                    }
                    break;
                case 'services':
                    // Refresh services if needed
                    if (allServices.length === 0) {
                        loadSampleServices();
                    }
                    break;
            }
        }
        
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }
        
        // ==========================================
        // AUTHENTIKASI
        // ==========================================
        
        function isLoggedIn() {
            const token = localStorage.getItem(STORAGE_KEYS.TOKEN);
            const user = localStorage.getItem(STORAGE_KEYS.USER);
            return token && user;
        }
        
        function checkAuth() {
            const token = localStorage.getItem(STORAGE_KEYS.TOKEN);
            const user = localStorage.getItem(STORAGE_KEYS.USER);
            
            if (token && user) {
                try {
                    adminToken = token;
                    currentUser = JSON.parse(user);
                } catch (e) {
                    console.error('Error parsing user data:', e);
                    logoutAdmin();
                }
            }
        }
        
        async function loginAdmin(event) {
            if (event) event.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');
            const loading = document.getElementById('loginLoading');
            const message = document.getElementById('loginMessage');
            
            // Clear previous message
            message.textContent = '';
            
            // Validate inputs
            if (!username || !password) {
                message.textContent = 'Username dan password harus diisi';
                return;
            }
            
            // Disable button and show loading
            btn.disabled = true;
            loading.classList.remove('hidden');
            
            try {
                // Jika API_URL ada, gunakan backend authentication
                if (API_URL) {
                    const response = await callAPI('login_admin', { username, password });
                    
                    if (response.success) {
                        // Save token and user data
                        localStorage.setItem(STORAGE_KEYS.TOKEN, response.token);
                        localStorage.setItem(STORAGE_KEYS.USER, JSON.stringify(response.user));
                        
                        adminToken = response.token;
                        currentUser = response.user;
                        
                        showAdminDashboard();
                    } else {
                        message.textContent = response.message || 'Login gagal';
                    }
                } else {
                    // Demo mode - simulate authentication
                    await simulateLogin(username, password);
                }
            } catch (error) {
                console.error('Login error:', error);
                message.textContent = 'Terjadi kesalahan saat login';
            } finally {
                // Re-enable button and hide loading
                btn.disabled = false;
                loading.classList.add('hidden');
            }
        }
        
        async function simulateLogin(username, password) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Note: In production, password validation happens in backend only
            // For demo purposes, we'll accept any non-empty password
            if (username && password) {
                // Create demo user data based on username
                let userData;
                switch(username.toLowerCase()) {
                    case 'admin':
                        userData = {
                            username: 'admin',
                            name: 'Administrator Utama',
                            role: 'superadmin',
                            permissions: 'all'
                        };
                        break;
                    case 'manager':
                        userData = {
                            username: 'manager',
                            name: 'Manager Operasional',
                            role: 'manager',
                            permissions: 'view,edit,orders'
                        };
                        break;
                    case 'teknisi':
                        userData = {
                            username: 'teknisi',
                            name: 'Teknisi Lapangan',
                            role: 'teknisi',
                            permissions: 'view,orders'
                        };
                        break;
                    default:
                        throw new Error('Username tidak dikenali');
                }
                
                // Generate demo token
                const token = btoa(JSON.stringify({
                    ...userData,
                    iat: Date.now(),
                    exp: Date.now() + (3600 * 1000) // 1 hour
                }));
                
                // Save to localStorage
                localStorage.setItem(STORAGE_KEYS.TOKEN, token);
                localStorage.setItem(STORAGE_KEYS.USER, JSON.stringify(userData));
                
                adminToken = token;
                currentUser = userData;
                
                showAdminDashboard();
            } else {
                throw new Error('Username dan password harus diisi');
            }
        }
        
        function logoutAdmin() {
            if (confirm('Anda yakin ingin logout?')) {
                localStorage.removeItem(STORAGE_KEYS.TOKEN);
                localStorage.removeItem(STORAGE_KEYS.USER);
                
                adminToken = null;
                currentUser = null;
                
                document.getElementById('loginForm').classList.remove('hidden');
                document.getElementById('adminDashboard').classList.add('hidden');
                document.getElementById('loginFormElement').reset();
                
                showSection('home');
            }
        }
        
        function showAdminDashboard() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.getElementById('adminWelcome').textContent = `Selamat datang, ${currentUser?.name || 'Admin'}!`;
            
            showAdminTab('dashboard');
        }
        
        // ==========================================
        // DATA MANAGEMENT
        // ==========================================
        
        function loadSampleServices() {
            // Sample services data
            allServices = [
                {
                    id: 1,
                    kategori: "Smartphone & Tablet",
                    tipe: "Ringan",
                    nama: "Ganti Battery",
                    harga_jual: 150000,
                    estimasi: "1-3 Jam",
                    deskripsi: "Harga tergantung model dan kapasitas",
                    status: "active"
                },
                {
                    id: 2,
                    kategori: "Smartphone & Tablet",
                    tipe: "Ringan",
                    nama: "Ganti LCD/Layar",
                    harga_jual: 300000,
                    estimasi: "2-4 Jam",
                    deskripsi: "Original/AMOLED/IPS",
                    status: "active"
                },
                {
                    id: 3,
                    kategori: "Smartphone & Tablet",
                    tipe: "Ringan",
                    nama: "Ganti Kaca (Glass Only)",
                    harga_jual: 200000,
                    estimasi: "2-3 Jam",
                    deskripsi: "Tanpa ganti LCD",
                    status: "active"
                },
                {
                    id: 4,
                    kategori: "Smartphone & Tablet",
                    tipe: "Sedang",
                    nama: "Ganti Port Charging",
                    harga_jual: 150000,
                    estimasi: "1-2 Jam",
                    deskripsi: "USB-C/Lightning/Micro USB",
                    status: "active"
                },
                {
                    id: 5,
                    kategori: "Smartphone & Tablet",
                    tipe: "Berat",
                    nama: "Motherboard Repair",
                    harga_jual: 500000,
                    estimasi: "1-3 Hari",
                    deskripsi: "Microsoldering IC/Resetore Data",
                    status: "active"
                },
                {
                    id: 6,
                    kategori: "Laptop & PC",
                    tipe: "Ringan",
                    nama: "Instalasi OS & Driver",
                    harga_jual: 150000,
                    estimasi: "1-3 Jam",
                    deskripsi: "Windows/macOS/Linux",
                    status: "active"
                },
                {
                    id: 7,
                    kategori: "Laptop & PC",
                    tipe: "Ringan",
                    nama: "Pembersihan & Thermal Paste",
                    harga_jual: 100000,
                    estimasi: "1-2 Jam",
                    deskripsi: "Termasuk blower dan pasta baru",
                    status: "active"
                },
                {
                    id: 8,
                    kategori: "Printer & Scanner",
                    tipe: "Ringan",
                    nama: "Refill Tinta",
                    harga_jual: 50000,
                    estimasi: "30 Menit",
                    deskripsi: "Inkjet, per warna",
                    status: "active"
                }
            ];
            
            // Save to localStorage
            localStorage.setItem(STORAGE_KEYS.SERVICES, JSON.stringify(allServices));
            
            // Display services
            displayServices(allServices);
            
            // Update category filter
            initializeCategoryFilter();
        }
        
        function initializeCategoryFilter() {
            const categoryFilter = document.getElementById('categoryFilter');
            if (!categoryFilter) return;
            
            const categories = [...new Set(allServices.map(s => s.kategori))];
            categoryFilter.innerHTML = '<option value="">Semua Kategori</option>';
            
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                categoryFilter.appendChild(option);
            });
        }
        
        function displayServices(services) {
            const grid = document.getElementById('servicesGrid');
            if (!grid) return;
            
            if (services.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state col-span-3">
                        <i class="fas fa-concierge-bell"></i>
                        <p>Tidak ada layanan tersedia</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            services.forEach(service => {
                const typeClass = service.tipe === 'Ringan' ? 'light' : 
                                service.tipe === 'Sedang' ? 'medium' : 'heavy';
                
                html += `
                    <div class="card service-card ${typeClass}">
                        <div class="card-body">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <span class="status-badge status-${service.tipe.toLowerCase()}">
                                        ${service.tipe}
                                    </span>
                                    <h3 class="font-bold text-lg mt-2">${service.nama}</h3>
                                    <p class="text-gray-600 text-sm">${service.kategori}</p>
                                </div>
                                <div class="text-right">
                                    <div class="price-tag">Rp ${formatNumber(service.harga_jual)}</div>
                                    <div class="estimate-time">${service.estimasi}</div>
                                </div>
                            </div>
                            <p class="text-gray-700 mb-4">${service.deskripsi}</p>
                            <button onclick="openOrderModal(${service.id})" class="btn btn-primary w-full">
                                <i class="fas fa-shopping-cart mr-2"></i>Pesan Sekarang
                            </button>
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }
        
        function filterServices() {
            const category = document.getElementById('categoryFilter').value;
            const type = document.getElementById('typeFilter').value;
            
            let filtered = allServices;
            
            if (category) {
                filtered = filtered.filter(s => s.kategori === category);
            }
            
            if (type) {
                filtered = filtered.filter(s => s.tipe === type);
            }
            
            displayServices(filtered);
        }
        
        function loadOrdersFromStorage() {
            try {
                const stored = localStorage.getItem(STORAGE_KEYS.ORDERS);
                allOrders = stored ? JSON.parse(stored) : [];
            } catch (e) {
                console.error('Error loading orders:', e);
                allOrders = [];
            }
        }
        
        function saveOrdersToStorage() {
            localStorage.setItem(STORAGE_KEYS.ORDERS, JSON.stringify(allOrders));
        }
        
        // ==========================================
        // ORDER MANAGEMENT
        // ==========================================
        
        function openOrderModal(serviceId) {
            const service = allServices.find(s => s.id === serviceId);
            if (!service) {
                showAlert('error', 'Layanan tidak ditemukan');
                return;
            }
            
            currentOrder = {
                service: service,
                items: [{
                    id: service.id,
                    nama: service.nama,
                    kategori: service.kategori,
                    harga_jual: service.harga_jual,
                    estimasi: service.estimasi
                }]
            };
            
            document.getElementById('orderDetails').innerHTML = `
                <h4 class="font-bold text-lg mb-2">${service.nama}</h4>
                <div class="receipt-item">
                    <span>Kategori:</span>
                    <span>${service.kategori} (${service.tipe})</span>
                </div>
                <div class="receipt-item">
                    <span>Estimasi Waktu:</span>
                    <span>${service.estimasi}</span>
                </div>
                <div class="receipt-item">
                    <span>Harga:</span>
                    <span class="font-bold">Rp ${formatNumber(service.harga_jual)}</span>
                </div>
            `;
            
            updateOrderSummary();
            
            // Reset form
            document.getElementById('orderForm').reset();
            document.getElementById('discountMessage').innerHTML = '';
            discountApplied = null;
            
            // Show modal
            document.getElementById('orderModal').classList.remove('hidden');
        }
        
        function closeOrderModal() {
            document.getElementById('orderModal').classList.add('hidden');
            currentOrder = null;
            discountApplied = null;
        }
        
        function updateOrderSummary() {
            if (!currentOrder) return;
            
            const subtotal = currentOrder.items.reduce((sum, item) => sum + item.harga_jual, 0);
            const discount = discountApplied ? discountApplied.discount_amount : 0;
            const additional = parseInt(document.getElementById('additionalFees')?.value || 0);
            const total = Math.max(0, subtotal - discount + additional);
            
            document.getElementById('orderSubtotal').textContent = `Rp ${formatNumber(subtotal)}`;
            document.getElementById('orderDiscount').textContent = `Rp ${formatNumber(discount)}`;
            document.getElementById('orderAdditional').textContent = `Rp ${formatNumber(additional)}`;
            document.getElementById('orderTotal').textContent = `Rp ${formatNumber(total)}`;
        }
        
        function checkDiscount() {
            const code = document.getElementById('discountCode').value;
            if (!code) return;
            
            const subtotal = currentOrder.items.reduce((sum, item) => sum + item.harga_jual, 0);
            const messageEl = document.getElementById('discountMessage');
            
            // Sample discount validation
            const discountCodes = {
                'WELCOME10': { type: 'percent', value: 10, min_order: 100000, max_discount: 50000 },
                'GRANDOPENING': { type: 'fixed', value: 50000, min_order: 200000, max_discount: 50000 }
            };
            
            if (discountCodes[code]) {
                const discount = discountCodes[code];
                
                if (subtotal < discount.min_order) {
                    messageEl.innerHTML = `<span class="text-red-600">Minimal order Rp ${formatNumber(discount.min_order)}</span>`;
                    discountApplied = null;
                } else {
                    let discountAmount = discount.type === 'percent' 
                        ? subtotal * (discount.value / 100)
                        : discount.value;
                    
                    if (discount.max_discount && discountAmount > discount.max_discount) {
                        discountAmount = discount.max_discount;
                    }
                    
                    discountApplied = {
                        code: code,
                        discount_amount: discountAmount,
                        message: `Diskon diterapkan: Rp ${formatNumber(discountAmount)}`
                    };
                    
                    messageEl.innerHTML = `<span class="text-green-600">${discountApplied.message}</span>`;
                }
            } else {
                discountApplied = null;
                messageEl.innerHTML = `<span class="text-red-600">Kode diskon tidak valid</span>`;
            }
            
            updateOrderSummary();
        }
        
        async function submitOrder(event) {
            event.preventDefault();
            
            const btn = document.getElementById('submitOrderBtn');
            const loading = document.getElementById('orderLoading');
            
            // Validate form
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            
            if (!customerName || !customerPhone) {
                showAlert('error', 'Nama dan WhatsApp harus diisi');
                return;
            }
            
            // Disable button and show loading
            btn.disabled = true;
            loading.classList.remove('hidden');
            
            try {
                // Generate order data
                const orderId = generateOrderId();
                const receiptNumber = generateReceiptNumber();
                const subtotal = currentOrder.items.reduce((sum, item) => sum + item.harga_jual, 0);
                const discount = discountApplied ? discountApplied.discount_amount : 0;
                const additional = parseInt(document.getElementById('additionalFees').value || 0);
                const total = Math.max(0, subtotal - discount + additional);
                
                const orderData = {
                    id: orderId,
                    receipt: receiptNumber,
                    timestamp: new Date().toISOString(),
                    customer: {
                        name: customerName,
                        phone: customerPhone,
                        address: document.getElementById('customerAddress').value || ''
                    },
                    service: currentOrder.service,
                    subtotal: subtotal,
                    discount: discount,
                    additional_fees: additional,
                    total: total,
                    status: 'Pending',
                    payment_status: 'Belum_Bayar',
                    notes: document.getElementById('orderNotes').value || ''
                };
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // Save order
                allOrders.push(orderData);
                saveOrdersToStorage();
                
                // Show success message
                showAlert('success', `Order berhasil dibuat! Order ID: ${orderId}`);
                
                // Close modal
                closeOrderModal();
                
                // Auto track order
                showSection('track');
                document.getElementById('trackInput').value = orderId;
                setTimeout(() => trackOrder(), 500);
                
            } catch (error) {
                console.error('Order error:', error);
                showAlert('error', 'Gagal membuat order: ' + error.message);
            } finally {
                btn.disabled = false;
                loading.classList.add('hidden');
            }
        }
        
        function generateOrderId() {
            const now = new Date();
            const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            return `ORD${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2,'0')}${now.getDate().toString().padStart(2,'0')}${random}`;
        }
        
        function generateReceiptNumber() {
            const now = new Date();
            const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            return `MSC${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2,'0')}${now.getDate().toString().padStart(2,'0')}${random}`;
        }
        
        // ==========================================
        // TRACK ORDER
        // ==========================================
        
        function trackOrder() {
            const orderId = document.getElementById('trackInput').value.trim();
            if (!orderId) {
                showAlert('error', 'Masukkan Order ID terlebih dahulu');
                return;
            }
            
            const order = allOrders.find(o => o.id === orderId);
            if (!order) {
                displayTrackError('Order tidak ditemukan. Pastikan Order ID benar.');
                return;
            }
            
            displayTrackResult(order);
        }
        
        function displayTrackResult(order) {
            const resultEl = document.getElementById('trackResult');
            
            const statusClass = {
                'Pending': 'status-pending',
                'Dikonfirmasi': 'status-dikonfirmasi',
                'Diproses': 'status-diproses',
                'Selesai': 'status-selesai',
                'Dibatalkan': 'status-dibatalkan'
            }[order.status] || 'status-pending';
            
            resultEl.innerHTML = `
                <div class="card">
                    <div class="card-body">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h3 class="text-xl font-bold mb-2">Order #${order.id}</h3>
                                <p class="text-gray-600">${formatDate(order.timestamp)}</p>
                            </div>
                            <span class="status-badge ${statusClass}">${order.status}</span>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <h4 class="font-bold mb-3">Informasi Pelanggan</h4>
                                <p><strong>Nama:</strong> ${order.customer.name}</p>
                                <p><strong>WhatsApp:</strong> ${order.customer.phone}</p>
                                <p><strong>Alamat:</strong> ${order.customer.address || '-'}</p>
                            </div>
                            <div>
                                <h4 class="font-bold mb-3">Informasi Order</h4>
                                <p><strong>Status Bayar:</strong> ${order.payment_status}</p>
                                <p><strong>No. Resi:</strong> ${order.receipt || '-'}</p>
                                <p><strong>Layanan:</strong> ${order.service.nama}</p>
                            </div>
                        </div>
                        
                        <div class="receipt mb-6">
                            <div class="receipt-header">
                                <h4 class="font-bold text-lg">Ringkasan Pembayaran</h4>
                            </div>
                            <div class="receipt-details">
                                <div class="receipt-item">
                                    <span>Subtotal:</span>
                                    <span>Rp ${formatNumber(order.subtotal)}</span>
                                </div>
                                ${order.discount > 0 ? `
                                <div class="receipt-item">
                                    <span>Diskon:</span>
                                    <span>- Rp ${formatNumber(order.discount)}</span>
                                </div>
                                ` : ''}
                                ${order.additional_fees > 0 ? `
                                <div class="receipt-item">
                                    <span>Biaya Tambahan:</span>
                                    <span>+ Rp ${formatNumber(order.additional_fees)}</span>
                                </div>
                                ` : ''}
                                <div class="receipt-item receipt-total">
                                    <span>TOTAL:</span>
                                    <span>Rp ${formatNumber(order.total)}</span>
                                </div>
                            </div>
                        </div>
                        
                        ${order.notes ? `
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-bold mb-2">Catatan:</h4>
                            <p>${order.notes}</p>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        function displayTrackError(message) {
            const resultEl = document.getElementById('trackResult');
            resultEl.innerHTML = `
                <div class="alert alert-error">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <strong>Order Tidak Ditemukan</strong>
                    <p class="mt-1">${message}</p>
                </div>
            `;
        }
        
        // ==========================================
        // ADMIN FUNCTIONS
        // ==========================================
        
        function showAdminTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('border-blue-500', 'text-blue-600');
            });
            
            // Show selected tab
            document.getElementById(`admin${capitalizeFirst(tabName)}Tab`).classList.remove('hidden');
            
            // Add active class to clicked tab
            event.target.classList.add('border-blue-500', 'text-blue-600');
            
            // Load tab data
            switch(tabName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'orders':
                    loadOrdersData();
                    break;
                case 'services':
                    loadServicesData();
                    break;
            }
        }
        
        function loadDashboardData() {
            // Update stats
            document.getElementById('statTotalOrders').textContent = allOrders.length;
            
            const completedOrders = allOrders.filter(o => o.status === 'Selesai');
            const revenue = completedOrders.reduce((sum, o) => sum + (o.total || 0), 0);
            document.getElementById('statRevenue').textContent = `Rp ${formatNumber(revenue)}`;
            
            const pendingOrders = allOrders.filter(o => o.status === 'Pending');
            document.getElementById('statPending').textContent = pendingOrders.length;
            
            document.getElementById('statServices').textContent = allServices.filter(s => s.status === 'active').length;
            
            // Update recent orders
            const recentOrdersEl = document.getElementById('recentOrders');
            if (allOrders.length === 0) {
                recentOrdersEl.innerHTML = '<p class="text-gray-500">Belum ada order</p>';
            } else {
                const recent = allOrders.slice(-5).reverse();
                let html = '';
                recent.forEach(order => {
                    const statusClass = {
                        'Pending': 'status-pending',
                        'Dikonfirmasi': 'status-dikonfirmasi',
                        'Diproses': 'status-diproses',
                        'Selesai': 'status-selesai',
                        'Dibatalkan': 'status-dibatalkan'
                    }[order.status] || 'status-pending';
                    
                    html += `
                        <div class="border-b py-3 last:border-b-0">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-medium">${order.customer.name}</p>
                                    <p class="text-sm text-gray-500">${order.id}</p>
                                </div>
                                <div class="text-right">
                                    <span class="status-badge ${statusClass}">${order.status}</span>
                                    <p class="text-sm font-bold mt-1">Rp ${formatNumber(order.total)}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                recentOrdersEl.innerHTML = html;
            }
            
            // Create sample chart
            createSampleChart();
        }
        
        function createSampleChart() {
            const ctx = document.getElementById('orderChart');
            if (!ctx) return;
            
            // Destroy existing chart
            if (charts.orderChart) {
                charts.orderChart.destroy();
            }
            
            // Sample data
            const labels = ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'];
            const data = [3, 5, 2, 8, 6, 4, 7];
            
            charts.orderChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Order per Hari',
                        data: data,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        function loadOrdersData() {
            const table = document.getElementById('ordersTable');
            
            if (allOrders.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-8">
                            <div class="empty-state">
                                <i class="fas fa-clipboard-list"></i>
                                <p>Belum ada order</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            allOrders.forEach(order => {
                const statusClass = {
                    'Pending': 'status-pending',
                    'Dikonfirmasi': 'status-dikonfirmasi',
                    'Diproses': 'status-diproses',
                    'Selesai': 'status-selesai',
                    'Dibatalkan': 'status-dibatalkan'
                }[order.status] || 'status-pending';
                
                html += `
                    <tr>
                        <td>
                            <div class="font-medium">${order.id}</div>
                            <div class="text-sm text-gray-500">${order.receipt || '-'}</div>
                        </td>
                        <td>
                            <div class="font-medium">${order.customer.name}</div>
                            <div class="text-sm text-gray-500">${order.customer.phone}</div>
                        </td>
                        <td class="font-bold">Rp ${formatNumber(order.total)}</td>
                        <td><span class="status-badge ${statusClass}">${order.status}</span></td>
                        <td>${formatDate(order.timestamp)}</td>
                        <td>
                            <div class="action-buttons">
                                <button onclick="viewOrderDetails('${order.id}')" class="btn btn-outline btn-sm">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button onclick="updateOrderStatus('${order.id}')" class="btn btn-outline btn-sm">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            table.innerHTML = html;
        }
        
        function searchOrders() {
            const searchTerm = document.getElementById('orderSearch').value.toLowerCase();
            const statusFilter = document.getElementById('orderStatusFilter').value;
            
            let filtered = allOrders;
            
            if (searchTerm) {
                filtered = filtered.filter(order => 
                    order.id.toLowerCase().includes(searchTerm) ||
                    order.customer.name.toLowerCase().includes(searchTerm) ||
                    order.customer.phone.includes(searchTerm)
                );
            }
            
            if (statusFilter) {
                filtered = filtered.filter(order => order.status === statusFilter);
            }
            
            // Update table display
            const table = document.getElementById('ordersTable');
            if (filtered.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-8">
                            <p class="text-gray-500">Tidak ada order yang sesuai</p>
                        </td>
                    </tr>
                `;
            } else {
                let html = '';
                filtered.forEach(order => {
                    const statusClass = {
                        'Pending': 'status-pending',
                        'Dikonfirmasi': 'status-dikonfirmasi',
                        'Diproses': 'status-diproses',
                        'Selesai': 'status-selesai',
                        'Dibatalkan': 'status-dibatalkan'
                    }[order.status] || 'status-pending';
                    
                    html += `
                        <tr>
                            <td>
                                <div class="font-medium">${order.id}</div>
                                <div class="text-sm text-gray-500">${order.receipt || '-'}</div>
                            </td>
                            <td>
                                <div class="font-medium">${order.customer.name}</div>
                                <div class="text-sm text-gray-500">${order.customer.phone}</div>
                            </td>
                            <td class="font-bold">Rp ${formatNumber(order.total)}</td>
                            <td><span class="status-badge ${statusClass}">${order.status}</span></td>
                            <td>${formatDate(order.timestamp)}</td>
                            <td>
                                <div class="action-buttons">
                                    <button onclick="viewOrderDetails('${order.id}')" class="btn btn-outline btn-sm">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button onclick="updateOrderStatus('${order.id}')" class="btn btn-outline btn-sm">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                table.innerHTML = html;
            }
        }
        
        function filterOrders() {
            searchOrders(); // Reuse search function for filtering
        }
        
        function viewOrderDetails(orderId) {
            const order = allOrders.find(o => o.id === orderId);
            if (!order) {
                showAlert('error', 'Order tidak ditemukan');
                return;
            }
            
            const statusClass = {
                'Pending': 'status-pending',
                'Dikonfirmasi': 'status-dikonfirmasi',
                'Diproses': 'status-diproses',
                'Selesai': 'status-selesai',
                'Dibatalkan': 'status-dibatalkan'
            }[order.status] || 'status-pending';
            
            const modalHTML = `
                <div class="modal" onclick="if(event.target===this) this.remove()">
                    <div class="modal-content" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3 class="text-xl font-bold">Detail Order #${order.id}</h3>
                            <button onclick="this.closest('.modal').remove()" class="btn btn-outline btn-sm">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div>
                                    <h4 class="font-bold mb-3">Informasi Pelanggan</h4>
                                    <p><strong>Nama:</strong> ${order.customer.name}</p>
                                    <p><strong>WhatsApp:</strong> ${order.customer.phone}</p>
                                    <p><strong>Alamat:</strong> ${order.customer.address || '-'}</p>
                                    <p><strong>Catatan:</strong> ${order.notes || '-'}</p>
                                </div>
                                <div>
                                    <h4 class="font-bold mb-3">Informasi Order</h4>
                                    <p><strong>Status:</strong> <span class="status-badge ${statusClass}">${order.status}</span></p>
                                    <p><strong>Status Bayar:</strong> ${order.payment_status}</p>
                                    <p><strong>No. Resi:</strong> ${order.receipt || '-'}</p>
                                    <p><strong>Tanggal:</strong> ${formatDate(order.timestamp)}</p>
                                </div>
                            </div>
                            
                            <div class="mb-6">
                                <h4 class="font-bold mb-3">Detail Layanan</h4>
                                <div class="card">
                                    <div class="card-body">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <h5 class="font-bold">${order.service.nama}</h5>
                                                <p class="text-gray-600">${order.service.kategori} - ${order.service.tipe}</p>
                                            </div>
                                            <div class="text-right">
                                                <div class="price-tag">Rp ${formatNumber(order.service.harga_jual)}</div>
                                                <div class="estimate-time">${order.service.estimasi}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="receipt">
                                <div class="receipt-header">
                                    <h4 class="font-bold text-lg">Ringkasan Pembayaran</h4>
                                </div>
                                <div class="receipt-details">
                                    <div class="receipt-item">
                                        <span>Subtotal:</span>
                                        <span>Rp ${formatNumber(order.subtotal)}</span>
                                    </div>
                                    ${order.discount > 0 ? `
                                    <div class="receipt-item">
                                        <span>Diskon:</span>
                                        <span>- Rp ${formatNumber(order.discount)}</span>
                                    </div>
                                    ` : ''}
                                    ${order.additional_fees > 0 ? `
                                    <div class="receipt-item">
                                        <span>Biaya Tambahan:</span>
                                        <span>+ Rp ${formatNumber(order.additional_fees)}</span>
                                    </div>
                                    ` : ''}
                                    <div class="receipt-item receipt-total">
                                        <span>TOTAL:</span>
                                        <span>Rp ${formatNumber(order.total)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button onclick="printReceipt('${order.id}')" class="btn btn-primary">
                                <i class="fas fa-print mr-2"></i>Cetak Nota
                            </button>
                            <button onclick="this.closest('.modal').remove()" class="btn btn-outline">
                                Tutup
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
        
        function updateOrderStatus(orderId) {
            const newStatus = prompt('Masukkan status baru (Pending/Dikonfirmasi/Diproses/Selesai/Dibatalkan):');
            if (!newStatus || !['Pending', 'Dikonfirmasi', 'Diproses', 'Selesai', 'Dibatalkan'].includes(newStatus)) {
                showAlert('error', 'Status tidak valid');
                return;
            }
            
            const orderIndex = allOrders.findIndex(o => o.id === orderId);
            if (orderIndex === -1) {
                showAlert('error', 'Order tidak ditemukan');
                return;
            }
            
            allOrders[orderIndex].status = newStatus;
            saveOrdersToStorage();
            
            showAlert('success', 'Status order berhasil diperbarui');
            loadOrdersData();
        }
        
        function printReceipt(orderId) {
            const order = allOrders.find(o => o.id === orderId);
            if (!order) {
                showAlert('error', 'Order tidak ditemukan');
                return;
            }
            
            const printWindow = window.open('', '_blank');
            const receiptHTML = generateReceiptHTML(order);
            printWindow.document.write(receiptHTML);
            printWindow.document.close();
            printWindow.focus();
            
            // Auto print after a short delay
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 500);
        }
        
        function generateReceiptHTML(order) {
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Receipt ${order.receipt}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
                        .receipt { max-width: 400px; margin: 0 auto; }
                        .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #1e3a8a; padding-bottom: 10px; }
                        .header h2 { margin: 0; color: #1e3a8a; }
                        .order-info { margin-bottom: 20px; }
                        .order-info table { width: 100%; }
                        .order-info td { padding: 3px 0; }
                        .items { margin-bottom: 20px; }
                        .items table { width: 100%; border-collapse: collapse; }
                        .items th, .items td { border: 1px solid #ddd; padding: 8px; }
                        .items th { background-color: #f2f2f2; }
                        .footer { text-align: center; margin-top: 30px; font-size: 0.9em; color: #666; }
                        @media print { button { display: none; } }
                    </style>
                </head>
                <body>
                    <div class="receipt">
                        <div class="header">
                            <h2>MALIK SERVICE CENTER</h2>
                            <p>Jl.Untung Suropati Semarang</p>
                            <p>Telp: 0857-1308-7659</p>
                        </div>
                        
                        <div class="order-info">
                            <table>
                                <tr><td><strong>Receipt No:</strong></td><td>${order.receipt}</td></tr>
                                <tr><td><strong>Order ID:</strong></td><td>${order.id}</td></tr>
                                <tr><td><strong>Tanggal:</strong></td><td>${formatDate(order.timestamp)}</td></tr>
                                <tr><td><strong>Pelanggan:</strong></td><td>${order.customer.name}</td></tr>
                                <tr><td><strong>Status:</strong></td><td>${order.status}</td></tr>
                            </table>
                        </div>
                        
                        <div class="items">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Layanan</th>
                                        <th>Harga</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>${order.service.nama}</td>
                                        <td style="text-align: right;">Rp ${formatNumber(order.service.harga_jual)}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div style="background: #f9f9f9; padding: 15px; border-radius: 5px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Subtotal:</span>
                                <span>Rp ${formatNumber(order.subtotal)}</span>
                            </div>
                            ${order.discount > 0 ? `
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Diskon:</span>
                                <span>- Rp ${formatNumber(order.discount)}</span>
                            </div>
                            ` : ''}
                            ${order.additional_fees > 0 ? `
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Biaya Tambahan:</span>
                                <span>+ Rp ${formatNumber(order.additional_fees)}</span>
                            </div>
                            ` : ''}
                            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.1em; padding-top: 10px; border-top: 2px solid #333;">
                                <span>TOTAL:</span>
                                <span>Rp ${formatNumber(order.total)}</span>
                            </div>
                        </div>
                        
                        <div class="footer">
                            <p>Terima kasih atas kepercayaan Anda</p>
                            <p>*** STRUK INI SAH ***</p>
                        </div>
                        
                        <button onclick="window.print()" style="margin-top: 20px; padding: 10px 20px; background: #1e3a8a; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Cetak Nota
                        </button>
                    </div>
                </body>
                </html>
            `;
        }
        
        function loadServicesData() {
            const grid = document.getElementById('adminServicesGrid');
            
            if (allServices.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state col-span-3">
                        <i class="fas fa-concierge-bell"></i>
                        <p>Belum ada layanan</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            allServices.forEach(service => {
                const typeClass = service.tipe === 'Ringan' ? 'light' : 
                                service.tipe === 'Sedang' ? 'medium' : 'heavy';
                
                html += `
                    <div class="card service-card ${typeClass}">
                        <div class="card-body">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <span class="status-badge status-${service.tipe.toLowerCase()}">
                                        ${service.tipe}
                                    </span>
                                    <h3 class="font-bold text-lg mt-2">${service.nama}</h3>
                                    <p class="text-gray-600 text-sm">${service.kategori}</p>
                                </div>
                                <div class="text-right">
                                    <div class="price-tag">Rp ${formatNumber(service.harga_jual)}</div>
                                </div>
                            </div>
                            <p class="text-gray-700 mb-4">${service.deskripsi}</p>
                            <div class="flex justify-between items-center">
                                <span class="estimate-time">${service.estimasi}</span>
                                <div class="action-buttons">
                                    <button onclick="editService(${service.id})" class="btn btn-outline btn-sm">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteService(${service.id})" class="btn btn-outline btn-sm">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            grid.innerHTML = html;
        }
        
        function showNewOrderModal() {
            showAlert('info', 'Fitur order manual akan segera tersedia');
        }
        
        function showNewServiceModal() {
            showAlert('info', 'Fitur tambah layanan akan segera tersedia');
        }
        
        function editService(serviceId) {
            showAlert('info', 'Fitur edit layanan akan segera tersedia');
        }
        
        function deleteService(serviceId) {
            if (confirm('Apakah Anda yakin ingin menghapus layanan ini?')) {
                const index = allServices.findIndex(s => s.id === serviceId);
                if (index !== -1) {
                    allServices.splice(index, 1);
                    localStorage.setItem(STORAGE_KEYS.SERVICES, JSON.stringify(allServices));
                    loadServicesData();
                    showAlert('success', 'Layanan berhasil dihapus');
                }
            }
        }
        
        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================
        
        function formatNumber(num) {
            return new Intl.NumberFormat('id-ID').format(num);
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }
        
        function capitalizeFirst(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }
        
        function showAlert(type, message) {
            // Remove existing alerts
            const existingAlerts = document.querySelectorAll('.global-alert');
            existingAlerts.forEach(alert => alert.remove());
            
            // Create alert element
            const alertDiv = document.createElement('div');
            alertDiv.className = `global-alert alert alert-${type} fixed top-4 right-4 z-50 max-w-md`;
            alertDiv.innerHTML = `
                <div class="flex justify-between items-start">
                    <div class="flex-1">
                        <i class="fas fa-${getAlertIcon(type)} mr-2"></i>
                        ${message}
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            // Add to body
            document.body.appendChild(alertDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.remove();
                }
            }, 5000);
        }
        
        function getAlertIcon(type) {
            switch(type) {
                case 'success': return 'check-circle';
                case 'error': return 'exclamation-circle';
                case 'warning': return 'exclamation-triangle';
                case 'info': return 'info-circle';
                default: return 'info-circle';
            }
        }
        
        // ==========================================
        // API INTEGRATION
        // ==========================================
        
        async function callAPI(action, data = {}) {
            if (!API_URL) {
                // Demo mode - simulate API response
                return await simulateAPI(action, data);
            }
            
            try {
                const payload = {
                    action: action,
                    ...data
                };
                
                if (adminToken && action !== 'login_admin') {
                    payload.token = adminToken;
                }
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                return await response.json();
                
            } catch (error) {
                console.error('API Error:', error);
                return { 
                    success: false, 
                    message: 'Gagal menghubungi server. Pastikan URL API benar.' 
                };
            }
        }
        
        async function simulateAPI(action, data) {
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            switch(action) {
                case 'login_admin':
                    // Note: In production, password validation happens in backend only
                    // For demo, accept any non-empty password
                    if (data.username && data.password) {
                        let userData;
                        switch(data.username.toLowerCase()) {
                            case 'admin':
                                userData = {
                                    username: 'admin',
                                    name: 'Administrator Utama',
                                    role: 'superadmin',
                                    permissions: 'all'
                                };
                                break;
                            case 'manager':
                                userData = {
                                    username: 'manager',
                                    name: 'Manager Operasional',
                                    role: 'manager',
                                    permissions: 'view,edit,orders'
                                };
                                break;
                            case 'teknisi':
                                userData = {
                                    username: 'teknisi',
                                    name: 'Teknisi Lapangan',
                                    role: 'teknisi',
                                    permissions: 'view,orders'
                                };
                                break;
                            default:
                                return { success: false, message: 'Username tidak dikenali' };
                        }
                        
                        const token = btoa(JSON.stringify({
                            ...userData,
                            iat: Date.now(),
                            exp: Date.now() + (3600 * 1000)
                        }));
                        
                        return {
                            success: true,
                            token: token,
                            user: userData
                        };
                    } else {
                        return { success: false, message: 'Username dan password harus diisi' };
                    }
                    
                case 'get_services':
                    return { success: true, data: allServices };
                    
                case 'create_order':
                    // Generate order data
                    const orderId = generateOrderId();
                    const receiptNumber = generateReceiptNumber();
                    const subtotal = data.order.items.reduce((sum, item) => sum + item.harga_jual, 0);
                    const discount = data.discount || 0;
                    const additional = data.additional_fees || 0;
                    const total = Math.max(0, subtotal - discount + additional);
                    
                    const orderData = {
                        id: orderId,
                        receipt: receiptNumber,
                        timestamp: new Date().toISOString(),
                        customer: data.order.customer,
                        service: data.order.items[0],
                        subtotal: subtotal,
                        discount: discount,
                        additional_fees: additional,
                        total: total,
                        status: 'Pending',
                        payment_status: 'Belum_Bayar',
                        notes: data.order.notes || ''
                    };
                    
                    // Save order
                    allOrders.push(orderData);
                    saveOrdersToStorage();
                    
                    return {
                        success: true,
                        order_id: orderId,
                        receipt_number: receiptNumber,
                        calculation: {
                            subtotal: subtotal,
                            discount: discount,
                            additional_fees: additional,
                            total: total
                        }
                    };
                    
                case 'get_all_orders':
                    return { success: true, data: allOrders };
                    
                default:
                    return { success: false, message: 'Action tidak didukung dalam demo mode' };
            }
        }
        
        // ==========================================
        // SETUP INSTRUCTIONS
        // ==========================================
        
        function showSetupInstructions() {
            showAlert('info', `
                <strong>INSTRUKSI SETUP:</strong><br>
                1. Deploy Apps Script sebagai Web App<br>
                2. Copy URL Web App<br>
                3. Ganti API_URL di kode JavaScript<br>
                4. Gunakan login dari backend system
            `);
        }
        
        // Show instructions on first visit
        window.addEventListener('load', function() {
            if (!localStorage.getItem('malik_service_instructions_shown')) {
                setTimeout(showSetupInstructions, 2000);
                localStorage.setItem('malik_service_instructions_shown', 'true');
            }
        });
    </script>
</body>
</html>




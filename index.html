<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- SEO Meta Description -->
    <meta name="description" content="Malik Service Center Semarang. Servis HP, Laptop, iPhone, Tablet, Data Recovery. Melayani Pickup & Antar. Cek estimasi biaya dan booking sekarang!">
    <meta name="theme-color" content="#2563eb">
    <title>Malik Service Center</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --text-main: #334155;
            --text-light: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 12px;
            --transition: all 0.3s ease;
            --nav-height: 70px;
        }

        body.dark-mode {
            --light-bg: #0f172a;
            --light-card: #1e293b;
            --text-main: #f1f5f9;
            --text-light: #94a3b8;
            --border: #334155;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--light-bg);
            color: var(--text-main);
            transition: var(--transition);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-bottom: calc(var(--nav-height) + 20px);
        }

        /* HEADER */
        header {
            background: var(--light-card);
            padding: 1rem 5%;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .brand { font-size: 1.25rem; font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .header-actions button {
            background: none; border: none; font-size: 1.2rem; color: var(--text-main); cursor: pointer; margin-left: 10px;
        }

        /* MAIN CONTAINER */
        main { max-width: 800px; margin: 0 auto; padding: 1.5rem; width: 100%; flex: 1; }

        /* SECTIONS */
        .step-section {
            background: var(--light-card);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: none;
            animation: fadeIn 0.4s ease;
            margin-bottom: 1rem;
        }
        .step-section.active { display: block; }
        
        .full-width-section {
            background: transparent; box-shadow: none; padding: 0; display: none;
        }
        .full-width-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { margin-bottom: 1rem; color: var(--primary); font-size: 1.4rem; display: flex; align-items: center; gap: 10px; }
        h3 { margin-bottom: 0.8rem; font-size: 1.1rem; color: var(--text-main); }
        p.subtitle { color: var(--text-light); margin-bottom: 1.5rem; font-size: 0.9rem; }

        /* FORMS */
        .form-group { margin-bottom: 1.2rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 500; font-size: 0.9rem; color: var(--text-main); }
        input[type="text"], input[type="password"], input[type="tel"], input[type="date"], input[type="number"], select, textarea {
            width: 100%; padding: 14px; border: 1px solid var(--border); border-radius: 8px;
            background: var(--light-bg); color: var(--text-main); font-size: 1rem;
            transition: border-color 0.2s;
        }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }
        input[readonly] { background-color: #e2e8f0; color: #64748b; cursor: default; border-color: transparent; }

        /* BUTTONS */
        .btn { 
            width: 100%; padding: 14px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; 
            transition: var(--transition); display: flex; justify-content: center; align-items: center; gap: 8px; 
            font-size: 1rem; margin-bottom: 10px;
        }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-primary:disabled { background: #94a3b8; cursor: not-allowed; opacity: 0.7; }
        .btn-secondary { background: #64748b; color: white; }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-whatsapp:hover { background: #1ebc57; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--border); color: var(--text-main); }
        
        .nav-buttons { display: flex; gap: 10px; margin-top: 1.5rem; }

        /* HERO SPECIFIC */
        .hero-section { text-align: center; padding: 2rem 1rem; }
        .hero-icon { font-size: 3.5rem; color: var(--primary); margin-bottom: 1.5rem; animation: float 3s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        
        /* SERVICE GRID */
        .service-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; }
        .service-card { 
            background: var(--light-bg); border: 1px solid var(--border); padding: 15px; 
            border-radius: 8px; text-align: center; cursor: pointer; transition: 0.2s;
        }
        .service-card:hover { border-color: var(--primary); background: #eff6ff; transform: translateY(-2px); }
        .service-card i { font-size: 1.8rem; color: var(--primary); margin-bottom: 10px; display: block; }
        .service-card span { font-size: 0.85rem; font-weight: 600; }

        /* PICKUP BOX */
        .pickup-box {
            background-color: #e0f2fe;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            margin-bottom: 15px;
            display: none;
        }
        body.dark-mode .pickup-box {
            background-color: #1e3a8a;
            border-left-color: #60a5fa;
        }
        
        /* ARTICLE STYLES */
        .article-card {
            background: var(--light-card); border: 1px solid var(--border); border-radius: var(--radius);
            padding: 1rem; margin-bottom: 1rem; cursor: pointer; transition: 0.2s; display: flex; gap: 1rem;
        }
        .article-card:hover { border-color: var(--primary); box-shadow: var(--shadow); }
        .article-thumb { width: 80px; height: 80px; background: #e2e8f0; border-radius: 8px; flex-shrink: 0; object-fit: cover; }
        .article-info h4 { font-size: 1rem; margin-bottom: 5px; color: var(--text-main); }
        .article-info p { font-size: 0.8rem; color: var(--text-light); display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .article-tag { display: inline-block; font-size: 0.7rem; background: var(--primary); color: white; padding: 2px 8px; border-radius: 10px; margin-bottom: 5px; }

        /* ADMIN RECEIPT STYLES */
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .full-col { grid-column: span 2; }
        
        .price-summary {
            background-color: var(--primary);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        .price-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        .price-total { border-top: 1px solid rgba(255,255,255,0.3); margin-top: 8px; padding-top: 8px; font-weight: bold; font-size: 1.1rem; display: flex; justify-content: space-between; }

        /* PRINT PREVIEW / RECEIPT CARD */
        #receiptPreview {
            background: white; color: black; width: 100%; max-width: 380px;
            padding: 20px; font-family: 'Courier New', Courier, monospace;
            border: 1px solid #ccc; margin: 20px auto; border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .receipt-header { text-align: center; border-bottom: 2px dashed #000; padding-bottom: 15px; margin-bottom: 15px; }
        .receipt-logo { font-size: 2.5rem; color: #2563eb !important; display: inline-block; margin-bottom: 5px; }
        .receipt-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem; }
        .receipt-divider { border-top: 2px dashed #000; margin: 15px 0; }
        .receipt-total { font-weight: bold; font-size: 1.1rem; display: flex; justify-content: space-between; }

        /* AUDIT LOG */
        .audit-log { background: var(--dark-bg); color: #10b981; padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 0.8rem; height: 150px; overflow-y: auto; margin-top: 1rem; border: 1px solid var(--border); }
        .audit-entry { margin-bottom: 5px; border-bottom: 1px solid #333; padding-bottom: 2px; }

        /* TOAST */
        .toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #ef4444; color: white; padding: 12px 24px; border-radius: 50px; z-index: 2000; display: none; animation: slideDown 0.3s; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3); width: 90%; max-width: 400px; font-size: 0.9rem; }
        .toast.success { background: var(--secondary); }
        @keyframes slideDown { from { transform: translate(-50%, -100%); opacity: 0; } to { transform: translate(-50%, 0); opacity: 1; } }

        /* BOTTOM NAVIGATION */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: var(--nav-height);
            background: var(--light-card); border-top: 1px solid var(--border);
            display: flex; justify-content: space-around; align-items: center;
            z-index: 999; box-shadow: 0 -4px 10px rgba(0,0,0,0.05);
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-decoration: none; color: var(--text-light); font-size: 0.75rem;
            width: 20%; height: 100%; transition: 0.2s; background: none; border: none; cursor: pointer;
        }
        .nav-item i { font-size: 1.3rem; margin-bottom: 4px; transition: 0.2s; }
        .nav-item.active { color: var(--primary); }
        .nav-item.active i { transform: translateY(-3px); }

        /* PRINT MEDIA */
        @media print {
            body * { visibility: hidden; }
            #receiptPreview, #receiptPreview * { visibility: visible; }
            #receiptPreview { position: absolute; left: 0; top: 0; width: 100%; max-width: 100%; margin: 0; padding: 0; box-shadow: none; border: none; color: black !important; }
            .no-print, .bottom-nav, header, .toast { display: none !important; }
        }

        /* Responsive */
        @media(max-width: 480px) { 
            .admin-grid { grid-template-columns: 1fr; } 
            .full-col { grid-column: span 1; } 
            .service-grid { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <div class="brand"><i class="fa-solid fa-screwdriver-wrench"></i> Malik Service</div>
        <div class="header-actions">
            <button id="darkModeBtn"><i class="fa-solid fa-moon"></i></button>
        </div>
    </header>

    <div id="toast" class="toast"></div>

    <main>
        <!-- 1. HERO SECTION (HOME) -->
        <section id="home-section" class="step-section active hero-section">
            <i class="fa-solid fa-microchip hero-icon"></i>
            <h1>Malik Service Center</h1>
            <p class="subtitle">Solusi perbaikan HP, Laptop & Elektronik Cepat & Bergaransi.</p>
            
            <div class="service-grid">
                <div class="service-card" onclick="selectQuickService('Servis HP', 'Ganti LCD')">
                    <i class="fa-solid fa-mobile-screen"></i>
                    <span>Ganti LCD</span>
                </div>
                <div class="service-card" onclick="selectQuickService('Servis HP', 'Ganti Baterai')">
                    <i class="fa-solid fa-battery-full"></i>
                    <span>Baterai Baru</span>
                </div>
                <div class="service-card" onclick="selectQuickService('Servis Laptop', 'Servis Ringan')">
                    <i class="fa-solid fa-laptop"></i>
                    <span>Servis Laptop</span>
                </div>
                <div class="service-card" onclick="selectQuickService('Servis HP', 'Water Damage')">
                    <i class="fa-solid fa-droplet"></i>
                    <span>Air Masuk</span>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="navTo('order-section')">
                Buat Order Servis <i class="fa-solid fa-arrow-right"></i>
            </button>
            
            <button class="btn btn-outline" onclick="navTo('article-section')">
                <i class="fa-solid fa-book-open"></i> Baca Tips & Artikel
            </button>

            <button class="btn btn-outline" onclick="navTo('login-section')" style="margin-top:10px;">
                <i class="fa-solid fa-lock"></i> Login Admin
            </button>
            
            <div style="margin-top: 2rem; font-size: 0.8rem; color: var(--text-light);">
                <i class="fa-solid fa-database"></i> Database Update: <span id="dbStatus">Checking...</span>
            </div>
        </section>

        <!-- 2. FORM ORDER (LAYANAN & ORDER) -->
        <section id="order-section" class="step-section full-width-section">
            <h2><i class="fa-solid fa-wrench"></i> Form Order Servis</h2>
            
            <div class="form-group">
                <label>Kategori Perangkat</label>
                <select id="custCategory" onchange="populateServiceDropdown()">
                    <option value="">-- Pilih Kategori --</option>
                </select>
            </div>

            <div class="form-group">
                <label>Komponen & Kerusakan</label>
                <select id="custService" onchange="updatePriceSummary()">
                    <option value="">-- Pilih Kerusakan --</option>
                </select>
            </div>

            <!-- PICKUP -->
            <div class="form-group">
                <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                    <input type="checkbox" id="needPickup" style="width:auto;" onchange="togglePickupInput()">
                    Butuh Jemput Unit (Pickup)?
                </label>
            </div>

            <div id="pickupInputGroup" class="pickup-box">
                <label>Jarak Lokasi (km)</label>
                <input type="number" id="pickupDistance" placeholder="Contoh: 3" oninput="updatePriceSummary()">
                <small id="pickupFeeText" style="display:block; margin-top:5px; color:var(--primary); font-weight:600;">
                    Biaya Pickup: Rp 0
                </small>
                <small style="display:block; margin-top:2px; font-size:0.75rem;">
                    *Biaya Rp 25.000 untuk jarak < 5km. > 5km hubungi admin.
                </small>
            </div>

            <!-- PRICE DISPLAY -->
            <div id="priceDisplay" class="price-summary">
                <div style="font-weight:bold; margin-bottom:10px; border-bottom:1px solid rgba(255,255,255,0.2); padding-bottom:5px;">Rincian Biaya:</div>
                <div class="price-row">
                    <span>Sparepart:</span>
                    <span id="dispSparepart">Rp 0</span>
                </div>
                <div class="price-row">
                    <span>Jasa:</span>
                    <span id="dispService">Rp 0</span>
                </div>
                <div class="price-row" id="pickupRow" style="display:none; color:#fef08a;">
                    <span>Pickup:</span>
                    <span id="dispPickup">Rp 0</span>
                </div>
                <div class="price-total">
                    <span>TOTAL:</span>
                    <span id="dispTotal">Rp 0</span>
                </div>
            </div>

            <div style="margin: 20px 0; border-top: 1px solid var(--border);"></div>
            
            <h3>Data Diri</h3>
            <div class="form-group">
                <label>Nama Lengkap</label>
                <input type="text" id="custName" placeholder="Contoh: Budi Santoso">
            </div>
            <div class="form-group">
                <label>Nomor WhatsApp</label>
                <input type="tel" id="custWA" placeholder="0812...">
            </div>
            <div class="form-group">
                <label>Alamat / Detail Lokasi</label>
                <textarea id="custAddress" rows="2" placeholder="Alamat lengkap..."></textarea>
            </div>

            <button id="btnSendWA" class="btn btn-whatsapp" onclick="sendCustomerOrder()">
                <i class="fa-brands fa-whatsapp"></i> Kirim Order ke WA
            </button>
        </section>

        <!-- 3. LOGIN SECTION (UPDATED SERVER SIDE) -->
        <section id="login-section" class="step-section">
            <h2><i class="fa-solid fa-user-shield"></i> Login Admin</h2>
            <p class="subtitle">Sistem keamanan terintegrasi dengan Server.</p>
            
            <div class="alert" style="background: #fff7ed; padding: 10px; border-radius: 8px; font-size: 0.8rem; color: #c2410c; border: 1px solid #fed7aa; margin-bottom: 15px;">
                <i class="fa-solid fa-server"></i> <strong>Mode Aman:</strong> PIN divalidasi ke Database Spreadsheet (Bukan hardcoded).
            </div>

            <div class="form-group">
                <label>PIN Admin (6 Digit)</label>
                <input type="password" id="adminPin" placeholder="Masukkan PIN" maxlength="6" pattern="\d*">
                <small id="loginStatus" style="display:block; margin-top:5px; font-size:0.8rem;"></small>
            </div>
            <button id="btnLogin" class="btn btn-primary" onclick="handleLogin()">
                <span>Masuk Panel</span>
            </button>
            <button class="btn btn-secondary" onclick="navTo('home-section')">Kembali</button>
        </section>

        <!-- 4. RESI SECTION (UPDATED & FUNCTIONAL) -->
        <section id="resi-section" class="step-section">
            <h2><i class="fa-solid fa-search"></i> Cek Status Pesanan</h2>
            <p class="subtitle">Masukkan Nomor Order (Resi) yang tertera di struk.</p>
            
            <div class="form-group">
                <label>Nomor Order</label>
                <input type="text" id="checkResiInput" placeholder="Contoh: INV-20231025-1234">
            </div>
            <button id="btnCheckResi" class="btn btn-primary" onclick="checkResi()">
                <i class="fa-solid fa-magnifying-glass"></i> Cek Status
            </button>

            <div id="resiResultBox" style="display:none; margin-top:20px;">
                <!-- Hasil pencarian muncul di sini -->
            </div>
        </section>

        <!-- 5. ADMIN PANEL -->
        <section id="admin-panel" class="step-section full-width-section">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                <h2 style="margin:0;"><i class="fa-solid fa-file-invoice"></i> Buat Resi</h2>
                <button class="btn btn-danger" onclick="logout()" style="width:auto; padding: 8px 15px; font-size: 0.8rem; margin:0;">Keluar</button>
            </div>
            
            <div class="admin-grid">
                <div class="form-group full-col">
                    <label>Nomor Order / Resi</label>
                    <input type="text" id="resOrderId" placeholder="Otomatis" readonly>
                </div>
                <div class="form-group">
                    <label>Tanggal</label>
                    <input type="date" id="resDate" onchange="updateLivePreview()">
                </div>
                <div class="form-group">
                    <label>Nama Pelanggan</label>
                    <input type="text" id="resName" placeholder="Nama Customer" oninput="updateLivePreview()">
                </div>
                <div class="form-group">
                    <label>No. HP / WA</label>
                    <input type="text" id="resWA" placeholder="08..." oninput="updateLivePreview()">
                </div>
                <div class="form-group">
                    <label>Perangkat</label>
                    <input type="text" id="resDevice" placeholder="HP/Laptop" oninput="updateLivePreview()">
                </div>
                <div class="form-group">
                    <label>Merek/Model</label>
                    <input type="text" id="resModel" placeholder="Samsung A52" oninput="updateLivePreview()">
                </div>
                <div class="form-group full-col">
                    <label>Keluhan / Kerusakan</label>
                    <textarea id="resIssue" rows="2" placeholder="Deskripsi..." oninput="updateLivePreview()"></textarea>
                </div>
                <div class="form-group full-col">
                    <label>Layanan & Biaya</label>
                    <textarea id="resServices" rows="3" placeholder="Ganti LCD - 500000&#10;Jasa - 50000" oninput="updateLivePreview()"></textarea>
                </div>
            </div>

            <div style="margin-top: 1rem;">
                <button class="btn btn-primary" onclick="printReceipt()">
                    <i class="fa-solid fa-print"></i> Cetak Resi
                </button>
                <button class="btn btn-secondary" onclick="copyReceiptText()">
                    <i class="fa-solid fa-copy"></i> Salin Teks Resi
                </button>
            </div>

            <div class="receipt-divider"></div>
            <h4 style="text-align:center; color:var(--text-light);">Preview Tampilan:</h4>
            
            <div id="receiptPreview">
                <div class="receipt-header">
                    <i class="fa-solid fa-screwdriver-wrench receipt-logo"></i>
                    <div style="font-weight:bold; font-size:1.2rem; text-transform:uppercase;">MALIK SERVICE</div>
                    <div style="font-size:0.8rem;"> DS.JamalSari RT004/RW002 No.52 Jl.Untung Suropati, Semarang </div>
                    <div style="font-size:0.8rem;">WA: 0857-1308-7659</div>
                </div>
                <div class="receipt-row"><span>No. Order:</span><span id="prevId">-</span></div>
                <div class="receipt-row"><span>Tanggal:</span><span id="prevDate">-</span></div>
                <div class="receipt-divider"></div>
                <div class="receipt-row"><span>Pelanggan:</span><span id="prevName">-</span></div>
                <div class="receipt-row"><span>No. HP:</span><span id="prevWA">-</span></div>
                <div class="receipt-divider"></div>
                <div class="receipt-row"><span>Perangkat:</span><span id="prevDevice">-</span></div>
                <div class="receipt-row"><span>Model:</span><span id="prevModel">-</span></div>
                <div class="receipt-row" style="flex-direction:column;">
                    <span style="font-weight:bold; margin-bottom:2px;">Keluhan:</span>
                    <span id="prevIssue" style="font-size:0.8rem; text-align:right;">-</span>
                </div>
                <div class="receipt-divider"></div>
                <div style="font-weight:bold; margin-bottom:5px;">Rincian:</div>
                <div id="prevServices">
                    <div style="font-size:0.8rem; text-align:center;">Belum ada data</div>
                </div>
                <div class="receipt-divider"></div>
                <div class="receipt-total">
                    <span>TOTAL:</span>
                    <span id="prevTotal">Rp 0</span>
                </div>
                <div class="receipt-footer" style="text-align:center; margin-top:15px; font-size:0.7rem;">
                    <p>*Simpan struk ini sebagai bukti garansi.</p>
                    <p>Terima Kasih</p>
                </div>
            </div>

            <!-- AUDIT LOG -->
            <div style="margin-top: 2rem;">
                <h4>Audit Log Aktivitas (Lokal)</h4>
                <div id="auditContainer" class="audit-log"></div>
            </div>
        </section>

        <!-- 6. HALAMAN ARTIKEL -->
        <section id="article-section" class="step-section full-width-section">
            <h2><i class="fa-solid fa-newspaper"></i> Artikel & Tips</h2>
            <div id="articleList">
                <!-- Articles injected via JS -->
            </div>
            
            <!-- Detail View (Hidden by default) -->
            <div id="articleDetail" style="display:none;">
                <button class="btn btn-outline" onclick="closeArticleDetail()" style="margin-bottom:1rem;"><i class="fa-solid fa-arrow-left"></i> Kembali</button>
                <h1 id="detailTitle" style="color:var(--primary); font-size:1.5rem; margin-bottom:0.5rem;"></h1>
                <span id="detailTag" class="article-tag"></span>
                <div id="detailContent" style="margin-top:1rem; font-size:1rem; color:var(--text-main);"></div>
                <button class="btn btn-whatsapp" style="margin-top:2rem;" onclick="window.location.href='https://wa.me/6285713087659'">
                    Konsultasi Masalah Ini
                </button>
            </div>
        </section>

    </main>

    <!-- FLOATING WA -->
    <a href="https://wa.me/6285713087659" class="fab-wa" target="_blank" style="position:fixed; bottom:85px; right:20px; width:55px; height:55px; background:#25D366; border-radius:50%; display:flex; justify-content:center; align-items:center; color:white; font-size:24px; box-shadow:0 4px 10px rgba(0,0,0,0.2); z-index:998; text-decoration:none;">
        <i class="fa-brands fa-whatsapp"></i>
    </a>

    <!-- BOTTOM NAVIGATION -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="navTo('home-section', this)">
            <i class="fa-solid fa-house"></i>
            <span>Home</span>
        </button>
        <button class="nav-item" onclick="navTo('order-section', this)">
            <i class="fa-solid fa-cart-plus"></i>
            <span>Order</span>
        </button>
        <button class="nav-item" onclick="navTo('article-section', this)">
            <i class="fa-solid fa-book-open"></i>
            <span>Artikel</span>
        </button>
        <button class="nav-item" onclick="navTo('resi-section', this)">
            <i class="fa-solid fa-receipt"></i>
            <span>Cek Resi</span>
        </button>
        <button class="nav-item" onclick="navTo('login-section', this)">
            <i class="fa-solid fa-user-lock"></i>
            <span>Admin</span>
        </button>
    </nav>

    <!-- JAVASCRIPT (FULLY UPDATED) -->
    <script>
        // ==========================================
        // 1. KONFIGURASI & KEAMANAN (UPDATED URL)
        // ==========================================
        const CONFIG = {
            // URL BARU dari user
            APPS_SCRIPT_URL: "https://script.google.com/macros/s/AKfycbycskkRuzgLw670o_FaJynI9hJEDM48ELg-7NzUDgVLJi687yAKRMZXI2_cvw4WzsZR/exec", 
            SESSION_TIMEOUT: 30 * 60 * 1000 // 30 menit
        };

        // Audit Log Helper
        const AuditLog = {
            add: (action) => {
                const logs = JSON.parse(localStorage.getItem('malik_audit_logs') || '[]');
                const newLog = {
                    time: new Date().toLocaleString('id-ID'),
                    action: action
                };
                logs.unshift(newLog); 
                if(logs.length > 20) logs.pop(); 
                localStorage.setItem('malik_audit_logs', JSON.stringify(logs));
                AuditLog.render();
            },
            render: () => {
                const container = document.getElementById('auditContainer');
                const logs = JSON.parse(localStorage.getItem('malik_audit_logs') || '[]');
                if(!container) return;
                container.innerHTML = logs.length === 0 ? 
                    '<div style="color:#666; text-align:center; padding:10px;">Belum ada aktivitas.</div>' : 
                    logs.map(l => `<div class="audit-entry"><span style="color:#94a3b8">[${l.time}]</span> ${l.action}</div>`).join('');
            }
        };

        // ==========================================
        // 2. DATABASE LAYANAN (Tetap Sama)
        // ==========================================
        const masterServiceDatabase = [
            { cat: "Servis HP Android", item: "Ganti LCD", issue: "Layar pecah / touch error", price: 250000, est: "2 Jam" },
            { cat: "Servis HP Android", item: "Ganti Baterai", issue: "Baterai boros / drop", price: 120000, est: "30 Menit" },
            { cat: "Servis iPhone", item: "Ganti LCD iPhone", issue: "Touch disease / retak", price: 450000, est: "3 Jam" },
            { cat: "Servis iPhone", item: "Ganti Baterai iPhone", issue: "Baterai drop", price: 250000, est: "1 Jam" },
            { cat: "Servis Tablet", item: "Ganti LCD Tablet", issue: "Layar putus", price: 350000, est: "1 Hari" },
            { cat: "Servis Tablet", item: "Ganti Baterai Tablet", issue: "Tidak menyala", price: 200000, est: "2 Jam" },
            { cat: "Servis Laptop Ringan", item: "Ganti Keyboard Laptop", issue: "Tombol mati", price: 300000, est: "1 Hari" },
            { cat: "Servis Laptop Ringan", item: "Upgrade SSD / RAM", issue: "Lambat / Penuh", price: 400000, est: "2 Jam" },
            { cat: "Servis Laptop Ringan", item: "Thermal Paste", issue: "Overheat", price: 100000, est: "1 Jam" },
            { cat: "Servis Software", item: "Install Ulang Windows", issue: "Bootloop / Virus", price: 150000, est: "2 Jam" },
            { cat: "Servis Software", item: "Flash HP Android", issue: "Bootloop / Stuck Logo", price: 100000, est: "3 Jam" },
            { cat: "Servis Software", item: "Unlock / FRP", issue: "Lupa Pola / Google", price: 150000, est: "4 Jam" },
            { cat: "Servis Software", item: "Data Recovery", issue: "Foto Hilang / Terformat", price: 300000, est: "Sesuai Antrisan" },
            { cat: "Servis Software", item: "Upgrade Storage", issue: "Memory Penuh", price: 150000, est: "1 Jam" },
            { cat: "Charging Port", item: "Konektor Cas", issue: "Tidak bisa charge / loyo", price: 100000, est: "2 Jam" },
            { cat: "IC Power", item: "Ganti IC Power", issue: "Mati Total", price: 250000, est: "1 Hari" },
            { cat: "IC Charging", item: "Ganti IC Charging", issue: "Tidak detect cas", price: 200000, est: "1 Hari" },
            { cat: "Kamera", item: "Ganti Kamera Depan", issue: "Blur / Black", price: 150000, est: "1 Jam" },
            { cat: "Kamera", item: "Ganti Kamera Belakang", issue: "Fokus Error", price: 200000, est: "1 Jam" },
            { cat: "Speaker / Mic", item: "Ganti Speaker", issue: "Suara Kecil / Kresek", price: 100000, est: "30 Menit" },
            { cat: "Speaker / Mic", item: "Ganti Mic", issue: "Lawan bicara tidak dengar", price: 100000, est: "30 Menit" },
            { cat: "Mati Total", item: "Cek Jalur / IC", issue: "HP Mati Total", price: 150000, est: "Check Dulu" },
            { cat: "Air Masuk", item: "Ultrasonic Cleaning", issue: "HP Kena Air", price: 100000, est: "24 Jam" },
            { cat: "Bootloop", item: "Repair Software", issue: "Bootloop Berat", price: 150000, est: "4 Jam" },
            { cat: "Maintenance Berkala", item: "Full Cleaning", issue: "Kotor / Debu", price: 75000, est: "1 Jam" }
        ];

        // Database Manager
        const DB = {
            init: () => {
                const localData = localStorage.getItem('malik_services_v2');
                let data = [];

                if (localData) {
                    try {
                        data = JSON.parse(localData);
                        if(data.length < masterServiceDatabase.length) {
                            console.log("Updating database...");
                            localStorage.setItem('malik_services_v2', JSON.stringify(masterServiceDatabase));
                            data = masterServiceDatabase;
                            DB.logUpdate();
                        }
                    } catch (e) {
                        localStorage.setItem('malik_services_v2', JSON.stringify(masterServiceDatabase));
                        data = masterServiceDatabase;
                        DB.logUpdate();
                    }
                } else {
                    localStorage.setItem('malik_services_v2', JSON.stringify(masterServiceDatabase));
                    data = masterServiceDatabase;
                    DB.logUpdate();
                }
                return data;
            },
            getCategories: (data) => {
                const cats = new Set(data.map(i => i.cat));
                return Array.from(cats).sort();
            },
            logUpdate: () => {
                const now = new Date();
                document.getElementById('dbStatus').innerText = now.toLocaleDateString('id-ID') + ' ' + now.toLocaleTimeString('id-ID');
            }
        };

        // Initialize Data
        const serviceData = DB.init();
        DB.logUpdate();

        // ==========================================
        // 3. AUTHENTICATION (SERVER SIDE FIX)
        // ==========================================
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function handleLogin() {
            const pinInput = document.getElementById('adminPin').value;
            const btn = document.getElementById('btnLogin');
            const statusTxt = document.getElementById('loginStatus');

            if(!pinInput) { showToast("PIN wajib diisi"); return; }

            // 1. Hash PIN
            const hashedPin = await sha256(pinInput);

            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Menghubungi Server...';
            statusTxt.innerText = "Memvalidasi ke Database...";
            statusTxt.style.color = "blue";

            try {
                // 2. Kirim ke Google Apps Script
                const response = await fetch(CONFIG.APPS_SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: "login",
                        pinHash: hashedPin
                    })
                });

                const result = await response.json();

                if (result.success) {
                    localStorage.setItem('malik_admin_session', JSON.stringify({ time: Date.now() }));
                    AuditLog.add(`Login Berhasil (${result.username})`);
                    showToast("Login Berhasil!", true);
                    document.getElementById('resDate').valueAsDate = new Date();
                    document.getElementById('resOrderId').value = generateOrderId();
                    updateLivePreview();
                    AuditLog.render();
                    navTo('admin-panel');
                } else {
                    showToast(result.message);
                    AuditLog.add("Gagal Login: PIN Salah");
                    statusTxt.innerText = result.message;
                    statusTxt.style.color = "red";
                }

            } catch (error) {
                console.error(error);
                showToast("Gagal koneksi ke Server.");
                statusTxt.innerText = "Error Koneksi. Cek Internet.";
                statusTxt.style.color = "red";
            }

            btn.disabled = false;
            btn.innerHTML = '<span>Masuk Panel</span>';
        }

        // CEK RESI FUNCTION (NEW)
        async function checkResi() {
            const inputId = document.getElementById('checkResiInput').value.trim();
            const resultBox = document.getElementById('resiResultBox');
            const btn = document.getElementById('btnCheckResi');

            if(!inputId) { showToast("Masukkan Nomor Order!"); return; }

            btn.disabled = true;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Mencari...';

            try {
                const response = await fetch(CONFIG.APPS_SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify({
                        action: "check_resi",
                        resiId: inputId
                    })
                });

                const result = await response.json();

                if (result.success) {
                    const d = result.data;
                    resultBox.style.display = 'block';
                    resultBox.innerHTML = `
                        <div style="background:#eff6ff; padding:15px; border-radius:8px; border-left:4px solid var(--primary);">
                            <h4 style="margin:0 0 10px 0; color:var(--primary);">Status Pesanan Ditemukan</h4>
                            <p><strong>Nama:</strong> ${d.customerName}</p>
                            <p><strong>Waktu:</strong> ${d.orderDate}</p>
                            <p><strong>Status:</strong> <span style="color:var(--secondary); font-weight:bold;">${d.status}</span></p>
                            <p><strong>Estimasi:</strong> ${d.total}</p>
                        </div>
                    `;
                } else {
                    resultBox.style.display = 'block';
                    resultBox.innerHTML = `<div style="color:red; text-align:center; padding:10px;">${result.message}</div>`;
                }

            } catch (error) {
                showToast("Gagal mengecek resi (Offline/Error)");
            }

            btn.disabled = false;
            btn.innerHTML = 'Cek Status';
        }

        function checkSession() {
            const session = JSON.parse(localStorage.getItem('malik_admin_session'));
            if(session && (Date.now() - session.time < CONFIG.SESSION_TIMEOUT)) {
                return true;
            }
            return false;
        }

        function logout() {
            localStorage.removeItem('malik_admin_session');
            showToast("Logout Berhasil", true);
            navTo('login-section');
        }

        // ==========================================
        // 4. UI LOGIC & NAVIGATION
        // ==========================================
        function navTo(sectionId, btnElement = null) {
            if(sectionId === 'admin-panel' && !checkSession()) {
                navTo('login-section');
                return;
            }

            document.querySelectorAll('.step-section, .full-width-section').forEach(sec => {
                sec.classList.remove('active');
                sec.style.display = 'none';
            });
            
            const target = document.getElementById(sectionId);
            if(target) {
                target.style.display = (sectionId === 'admin-panel' || sectionId === 'order-section' || sectionId === 'article-section') ? 'block' : 'block';
                setTimeout(() => target.classList.add('active'), 10);
            }
            
            window.scrollTo(0,0);

            if(btnElement) {
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                btnElement.classList.add('active');
            } else {
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                if(sectionId === 'home-section') document.querySelectorAll('.nav-item')[0].classList.add('active');
                if(sectionId === 'order-section') document.querySelectorAll('.nav-item')[1].classList.add('active');
                if(sectionId === 'article-section') document.querySelectorAll('.nav-item')[2].classList.add('active');
                if(sectionId === 'resi-section') document.querySelectorAll('.nav-item')[3].classList.add('active');
                if(sectionId === 'login-section' || sectionId === 'admin-panel') document.querySelectorAll('.nav-item')[4].classList.add('active');
            }

            if(sectionId === 'order-section') populateCategories();
            if(sectionId === 'article-section') renderArticleList();
        }

        function showToast(msg, isSuccess = false) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.className = `toast ${isSuccess ? 'success' : ''}`;
            toast.style.display = 'block';
            setTimeout(() => { toast.style.display = 'none'; }, 3000);
        }

        document.getElementById('darkModeBtn').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });

        // ==========================================
        // 5. ORDER LOGIC
        // ==========================================
        function formatRupiah(num) {
            return "Rp " + parseInt(num).toLocaleString('id-ID');
        }

        function populateCategories() {
            const select = document.getElementById('custCategory');
            if(select.options.length > 1) return;

            const categories = DB.getCategories(serviceData);
            categories.forEach(cat => {
                const opt = document.createElement('option');
                opt.value = cat;
                opt.textContent = cat;
                select.appendChild(opt);
            });
        }

        function populateServiceDropdown() {
            const cat = document.getElementById('custCategory').value;
            const servSelect = document.getElementById('custService');
            servSelect.innerHTML = '<option value="">-- Pilih Kerusakan --</option>';
            document.getElementById('priceDisplay').style.display = 'none';

            if(!cat) return;

            const filtered = serviceData.filter(s => s.cat === cat);
            filtered.forEach(item => {
                const opt = document.createElement('option');
                opt.value = JSON.stringify(item);
                opt.textContent = `${item.item} - ${item.issue}`;
                servSelect.appendChild(opt);
            });
        }

        function togglePickupInput() {
            const checked = document.getElementById('needPickup').checked;
            document.getElementById('pickupInputGroup').style.display = checked ? 'block' : 'none';
            updatePriceSummary();
        }

        function calculatePickup() {
            if(!document.getElementById('needPickup').checked) return 0;
            const dist = parseFloat(document.getElementById('pickupDistance').value) || 0;
            if(dist > 0 && dist < 5) return 25000;
            if(dist >= 5) return 999999;
            return 0;
        }

        function updatePriceSummary() {
            const val = document.getElementById('custService').value;
            const priceBox = document.getElementById('priceDisplay');
            if(!val) { priceBox.style.display = 'none'; return; }

            const data = JSON.parse(val);
            const pickupFee = calculatePickup();
            
            let baseTotal = data.price;
            let finalDisplay = baseTotal;
            let pickupText = "Rp 0";

            if(pickupFee === 25000) {
                finalDisplay += pickupFee;
                pickupText = "Rp 25.000";
                document.getElementById('pickupRow').style.display = 'flex';
            } else if (pickupFee > 100000) {
                finalDisplay = "Hubungi Admin";
                pickupText = "> 5km (Admin Only)";
                document.getElementById('pickupRow').style.display = 'flex';
            } else {
                document.getElementById('pickupRow').style.display = 'none';
            }

            document.getElementById('dispSparepart').textContent = "Termasuk Jasa (Paket)";
            document.getElementById('dispService').textContent = formatRupiah(data.price);
            document.getElementById('dispPickup').textContent = pickupText;
            document.getElementById('pickupFeeText').textContent = pickupText === "> 5km (Admin Only)" ? pickupText : `Biaya Pickup: ${pickupText}`;
            document.getElementById('dispTotal').textContent = typeof finalDisplay === 'number' ? formatRupiah(finalDisplay) : finalDisplay;
            
            priceBox.style.display = 'block';
        }

        function selectQuickService(cat, issue) {
            navTo('order-section');
            setTimeout(() => {
                document.getElementById('custCategory').value = cat;
                populateServiceDropdown();
                const servSelect = document.getElementById('custService');
                for(let i=0; i<servSelect.options.length; i++){
                    if(servSelect.options[i].text.includes(issue)) {
                        servSelect.selectedIndex = i;
                        break;
                    }
                }
                updatePriceSummary();
            }, 100);
        }

        async function sendCustomerOrder() {
            const name = document.getElementById('custName').value;
            const wa = document.getElementById('custWA').value;
            const address = document.getElementById('custAddress').value;
            const servVal = document.getElementById('custService').value;

            if(!name || !wa) { showToast("Nama & WA wajib diisi"); return; }

            let msg = `Halo Admin, saya mau servis.\n\nNama: ${name}\nWA: ${wa}\nAlamat: ${address}\n`;
            
            // Generate ID untuk tracking
            const newOrderId = generateOrderId(); 
            
            if(servVal) {
                const data = JSON.parse(servVal);
                const pickup = calculatePickup();
                let est = data.price;
                let pickupInfo = "";
                if(pickup === 25000) { est += 25000; pickupInfo = "\nBiaya Pickup: +Rp 25.000"; }
                if(pickup > 100000) { pickupInfo = "\nLokasi > 5km, mohon konfirmasi."; }

                msg += `\n--- Detail Servis ---\nID Order: ${newOrderId}\nKategori: ${data.cat}\nLayanan: ${data.item}\nMasalah: ${data.issue}\nEstimasi Biaya: ${formatRupiah(est)}${pickupInfo}`;
            }

            // Save to Spreadsheet (Termasuk OrderID agar bisa ditracking)
            const payload = { 
                orderId: newOrderId,
                name, wa, address, 
                cat: servVal ? JSON.parse(servVal).cat : 'Umum', 
                total: 0 // 0 kalo user isi form manual, tapi backend bisa nulis 0
            };
            
            fetch(CONFIG.APPS_SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify(payload)
            }).catch(e => console.log("Offline or Error sending to DB"));

            // Send WA
            window.open(`https://wa.me/6285713087659?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // ==========================================
        // 6. RECEIPT LOGIC
        // ==========================================
        function generateOrderId() {
            const d = new Date();
            return `INV-${d.getFullYear()}${(d.getMonth()+1).toString().padStart(2,'0')}${d.getDate().toString().padStart(2,'0')}-${Math.floor(Math.random()*10000)}`;
        }

        function updateLivePreview() {
            const map = {
                'resOrderId': 'prevId', 'resDate': 'prevDate', 'resName': 'prevName',
                'resWA': 'prevWA', 'resDevice': 'prevDevice', 'resModel': 'prevModel',
                'resIssue': 'prevIssue', 'resServices': 'prevServices'
            };
            
            for(let [id, target] of Object.entries(map)) {
                const el = document.getElementById(id);
                if(el && el.value !== document.getElementById(target).innerText) {
                    if(id === 'resServices') parseServices(el.value);
                    else document.getElementById(target).innerText = el.value || '-';
                }
            }
        }

        function parseServices(text) {
            const container = document.getElementById('prevServices');
            container.innerHTML = '';
            let total = 0;
            if(!text.trim()) { container.innerHTML = 'Belum ada data'; document.getElementById('prevTotal').innerText = 'Rp 0'; return; }
            
            text.split('\n').forEach(line => {
                if(!line.trim()) return;
                const parts = line.split('-');
                let name = line, price = 0, pStr = '';
                if(parts.length >= 2) {
                    name = parts.slice(0,-1).join('-').trim();
                    const pVal = parts[parts.length-1].replace(/\D/g,'');
                    price = parseInt(pVal) || 0;
                    pStr = formatRupiah(price);
                }
                total += price;
                container.innerHTML += `<div class="receipt-row"><span>${name}</span><span>${pStr}</span></div>`;
            });
            document.getElementById('prevTotal').innerText = formatRupiah(total);
        }

        function printReceipt() { window.print(); }

        function copyReceiptText() {
            const id = document.getElementById('prevId').innerText;
            const name = document.getElementById('prevName').innerText;
            const total = document.getElementById('prevTotal').innerText;
            const text = `RESI MALIK SERVICE\nNo: ${id}\nNama: ${name}\nTotal: ${total}\n\nTerima Kasih.`;
            navigator.clipboard.writeText(text).then(() => showToast("Teks Resi disalin!", true));
        }

        // ==========================================
        // 7. ARTICLE SYSTEM
        // ==========================================
        const articles = [
            { title: "HP Tidak Bisa Di-charge?", tag: "Tips HP", content: "Ini penyebab umumnya: 1. Kabel rusak. 2. Port kotor. 3. Baterai drop. Coba ganti kabel dulu ya." },
            { title: "LCD Retak Masih Bisa Dipakai?", tag: "Kerusakan Umum", content: "Bisa, tapi berisiko. Cairan LCD bisa merembes dan membuat layar berjamur. Segera ganti jika sentuh mulai error." },
            { title: "Baterai Boros Padahal Baru", tag: "Perawatan", content: "Bisa karena aplikasi latar belakang. Cek pengaturan baterai, matikan GPS/Bluetooth jika tidak dipakai." },
            { title: "Laptop Overheat Saat Main Game", tag: "Servis Laptop", content: "Coba bersihkan debu di kipas dan ganti thermal paste. Upgrade RAM juga membantu performa." },
            { title: "Data Terformat Bisa Kembali?", tag: "Data Recovery", content: "Masih bisa, selama memori tidak ditimpa oleh data baru. Jangan simpan apapun dulu, bawa ke teknisi." },
            { title: "Cara Merawat Baterai iPhone", tag: "Tips HP", content: "Hindari charging sampai 0% atau 100% terus. Idealnya antara 20-80%. Gunakan charger original." },
            { title: "Speaker iPhone Suara Kecil", tag: "Tips HP", content: "Cek bersihkan saringan speaker di atas layar (sering kotor debu)." },
            { title: "Layar Laptop Berkedip", tag: "Servis Laptop", content: "Biasanya masalah pada kabel fleksibel engsel atau driver grafik. Bawa untuk cek hardware." },
            { title: "HP Android Bootloop", tag: "Software", content: "Bisa diselesaikan dengan flashing ulang (Install ulang OS). Pastikan data backup dulu." },
            { title: "Water Damage, Apa Harus Dinyalakan?", tag: "Kerusakan Umum", content: "TIDAK. Matikan total, jangan cas. Segera bawa ke teknisi untuk pembersihan ultrasonic." },
            { title: "IC Power Mati Total", tag: "Kerusakan Umum", content: "Kerusakan berat pada hardware motherboard. Perlu penggantian IC dan microsoldering." },
            { title: "Upgrade SSD Laptop, Worth It?", tag: "Servis Laptop", content: "Sangat worth! Laptop jadi 5x lebih cepat booting dan buka aplikasi." },
            { title: "Touchscreen Error Sendiri", tag: "Kerusakan Umum", content: "Bisa karena screen protector tebal, LCD bocor, atau kabel flex lepas." },
            { title: "Charging Port Longgar", tag: "Charging", content: "Jangan dipaksa colok berulang kali. Soket bisa melepas dari PCB. Ganti port segera." },
            { title: "Kamera Depan Black Screen", tag: "Kamera", content: "Biasanya modul kamera putus atau kabel putus. Perlu diganti modul baru." },
            { title: "Wifi Hilang Terus", tag: "Software", content: "Coba Forget Network dan reconnect. Jika masih, bisa ada masalah di IC Wifi." },
            { title: "Mic Tidak Terdengar Saat Telpon", tag: "Speaker/Mic", content: "Bersihkan lubang mic kecil. Jika masih, ganti komponen mic." },
            { title: "HP Sering Restarts Sendiri", tag: "Tips HP", content: "Baterai sudah tidak kuat supply daya, atau ada software corrupt. Cek dulu baterai." },
            { title: "Biar Awet, Servis Rutin?", tag: "Perawatan", content: "Ya. Minimal 6 bulan sekali bersihkan debu dalam gunakan thermal paste baru." },
            { title: "Harga Ganti LCD iPhone?", tag: "Estimasi Harga", content: "Bervariasi mulai dari 400rb (LCD biasa) hingga 1jt+ (Original OLED)." },
            { title: "Lupa Pola Android", tag: "Software", content: "Bisa dibuka dengan cara FRP Unlock menggunakan tool khusus di servis kami." },
            { title: "Tablet Layar Pecah Mahal?", tag: "Servis Tablet", content: "Karena panel LCD tablet besar, harganya memang relatif lebih mahal dari HP." },
            { title: "Engsel Laptop Patah", tag: "Servis Laptop", content: "Jangan dipaksa buka tutup. Casing dan engsel perlu diganti set untuk aman." },
            { title: "Notifikasi WhatsApp Tidak Muncul", tag: "Tips HP", content: "Cek Setting Aplikasi > Notifikasi > WA. Pastikan Background Data diizinkan." },
            { title: "Simcard Tidak Terbaca", tag: "Kerusakan Umum", content: "Coba SIM lain. Jika tetap tidak terbaca, berarti IC Simcard bermasalah." },
            { title: "Garansi Servis Berapa Lama?", tag: "Edukasi Pelanggan", content: "Garansi di Malik Service biasanya 1-2 minggu untuk jasa servis dan 1 minggu untuk sparepart." },
            { title: "Bawa HP Semarang Dari Luar Kota?", tag: "Tips HP", content: "Bisa! Kami bisa menerima pengiriman unit via JNE/Sicepat untuk perbaikan." },
            { title: "Kipas Laptop Berisik", tag: "Servis Laptop", content: "Tanda bantalan kipas sudah habis. Ganti kipas baru agar tidak merusak motherboard." },
            { title: "Aplikasi Keluar Sendiri", tag: "Software", content: "Cache penuh atau RAM tidak cukup. Clear cache aplikasi tersebut." },
            { title: "Bodi HP Penyok/Bengkok?", tag: "Kerusakan Umum", content: "Bisa di pres kembali (bending) untuk meluruskan frame agar casing baru bisa pas." }
        ];

        function renderArticleList() {
            const container = document.getElementById('articleList');
            if(container.children.length > 0) return;
            articles.forEach((art, index) => {
                const div = document.createElement('div');
                div.className = 'article-card';
                div.onclick = () => openArticle(index);
                div.innerHTML = `
                    <img src="https://picsum.photos/seed/${index}/80/80" class="article-thumb" alt="icon">
                    <div class="article-info">
                        <span class="article-tag">${art.tag}</span>
                        <h4>${art.title}</h4>
                        <p>${art.content}</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function openArticle(index) {
            const art = articles[index];
            document.getElementById('articleList').style.display = 'none';
            const detail = document.getElementById('articleDetail');
            detail.style.display = 'block';
            document.getElementById('detailTitle').innerText = art.title;
            document.getElementById('detailTag').innerText = art.tag;
            document.getElementById('detailContent').innerHTML = `<p>${art.content}</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>`;
        }

        function closeArticleDetail() {
            document.getElementById('articleDetail').style.display = 'none';
            document.getElementById('articleList').style.display = 'block';
        }

        // Init Calls
        AuditLog.render();
    </script>
</body>
</html>
